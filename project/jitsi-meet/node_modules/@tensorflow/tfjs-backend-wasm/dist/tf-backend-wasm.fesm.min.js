/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
import{_FusedMatMul as e,broadcast_util as n,util as t,Abs as a,backend_util as r,Add as s,AddN as u,Identity as o,Transpose as i,All as d,Any as c,ArgMax as l,AvgPool as p,Reshape as m,BatchMatMul as f,slice_util as h,buffer as b,Slice as y,BatchToSpaceND as g,Cast as _,Ceil as w,ClipByValue as I,Concat as k,Conv2D as v,Conv2DBackpropInput as S,Cos as M,Cosh as E,CropAndResize as A,Cumsum as x,DepthToSpace as N,DepthwiseConv2dNative as F,Elu as O,Equal as T,Exp as R,ExpandDims as D,Fill as C,FlipLeftRight as P,Floor as W,FloorDiv as L,FusedBatchNorm as H,FusedConv2D as U,FusedDepthwiseConv2D as z,GatherNd as B,gather_util as j,GatherV2 as G,Greater as V,GreaterEqual as q,LeakyRelu as $,Less as K,LessEqual as X,Log as Q,LogicalAnd as Y,Max as Z,Maximum as J,MaxPool as ee,Mean as ne,Min as te,Minimum as ae,MirrorPad as re,Multiply as se,Neg as ue,NonMaxSuppressionV3 as oe,NonMaxSuppressionV4 as ie,NonMaxSuppressionV5 as de,NotEqual as ce,OneHot as le,OnesLike as pe,Pack as me,PadV2 as fe,Pow as he,Prelu as be,Prod as ye,Range as ge,RealDiv as _e,Relu as we,Relu6 as Ie,ResizeBilinear as ke,Reverse as ve,RotateWithOffset as Se,Round as Me,Rsqrt as Ee,ScatterNd as Ae,scatter_util as xe,Select as Ne,Sigmoid as Fe,Sin as Oe,Softmax as Te,SpaceToBatchND as Re,SparseFillEmptyRows as De,SparseReshape as Ce,SparseSegmentMean as Pe,SparseSegmentSum as We,SplitV as Le,Sqrt as He,Square as Ue,SquaredDifference as ze,Step as Be,StridedSlice as je,Sub as Ge,Sum as Ve,Tan as qe,Tanh as $e,Tile as Ke,TopK as Xe,Transform as Qe,Unpack as Ye,ZerosLike as Ze,registerKernel as Je,env as en,KernelBackend as nn,DataStorage as tn,engine as an,deprecationWarn as rn,registerBackend as sn}from"@tensorflow/tfjs-core";import un from"path";import on from"fs";import dn from"worker_threads";import cn from"perf_hooks";import ln from"os";var pn,mn;let fn;!function(e){e[e.float32=0]="float32",e[e.int32=1]="int32",e[e.bool=2]="bool",e[e.string=3]="string",e[e.complex64=4]="complex64"}(pn||(pn={})),function(e){e[e.linear=0]="linear",e[e.relu=1]="relu",e[e.relu6=2]="relu6",e[e.prelu=3]="prelu",e[e.leakyrelu=4]="leakyrelu",e[e.sigmoid=5]="sigmoid",e[e.elu=6]="elu"}(mn||(mn={}));const hn={kernelName:e,backendName:"wasm",setupFunc:function(n){fn=n.wasm.cwrap(e,null,["number","array","number","number","array","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){const{inputs:t,backend:a,attrs:r}=e,{a:s,b:u,bias:o,preluActivationWeights:i}=t;if("float32"!==s.dtype||"float32"!==u.dtype)throw new Error("_FusedMatMul for non non-float32 tensors not yet supported.");const{transposeA:d,transposeB:c,activation:l,leakyreluAlpha:p}=r,m=a.dataIdMap.get(s.dataId).id,f=a.dataIdMap.get(u.dataId).id;let h=0;if(null!=o){const e=a.dataIdMap.get(o.dataId);if(1!==e.shape.length)throw new Error(`_FusedMatMul only supports rank-1 bias but got rank ${e.shape.length}.`);h=e.id}const b=null==i?0:a.dataIdMap.get(i.dataId).id,y=mn[l];if(null==y)throw new Error(`${l} activation not yet supported for FusedConv2D in the wasm backend.`);const g=d?s.shape[2]:s.shape[1],_=c?u.shape[1]:u.shape[2],w=n.assertAndGetBroadcastShape(s.shape.slice(0,-2),u.shape.slice(0,-2)),I=a.makeOutput([...w,g,_],s.dtype),k=a.dataIdMap.get(I.dataId).id,v=new Uint8Array(new Int32Array(s.shape).buffer),S=new Uint8Array(new Int32Array(u.shape).buffer);return fn(m,v,s.shape.length,f,S,u.shape.length,d,c,y,h,b,p||0,k),I}};function bn(e,n){let a;return{kernelName:e,backendName:"wasm",setupFunc:function(n){a=n.wasm.cwrap(e,null,["number","number","number"])},kernelFunc:function(e){const{backend:r,inputs:{x:s}}=e,u=r.dataIdMap.get(s.dataId).id,o=r.makeOutput(s.shape,n||s.dtype),i=r.dataIdMap.get(o.dataId).id;return 0===t.sizeFromShape(o.shape)||a(u,pn[s.dtype],i),o}}}const yn=bn(a);function gn(e,n,a){let s;return{kernelName:e,backendName:"wasm",setupFunc:function(n){s=n.wasm.cwrap(e,null,["number","array","number","number","array","number","number","number"])},kernelFunc:function(e){const{backend:n,inputs:u}=e,{a:o,b:i}=u,d=n.dataIdMap.get(o.dataId).id,c=n.dataIdMap.get(i.dataId).id,l=null!=a?a:o.dtype,p=r.assertAndGetBroadcastShape(o.shape,i.shape),m=n.makeOutput(p,l);if(0===t.sizeFromShape(p))return m;const f=new Uint8Array(new Int32Array(o.shape).buffer),h=new Uint8Array(new Int32Array(i.shape).buffer),b=n.dataIdMap.get(m.dataId).id;return s(d,f,o.shape.length,c,h,i.shape.length,pn[o.dtype],b),m}}}const _n=gn(s);let wn;const In={kernelName:u,backendName:"wasm",setupFunc:function(e){wn=e.wasm.cwrap(u,null,["array","number","number","number"])},kernelFunc:function(e){const{inputs:n,backend:a}=e,r=a.makeOutput(n[0].shape,n[0].dtype);if(0===t.sizeFromShape(r.shape))return r;const s=n.map((e=>a.dataIdMap.get(e.dataId).id)),u=new Uint8Array(new Int32Array(s).buffer),o=a.dataIdMap.get(r.dataId).id;return wn(u,s.length,pn[r.dtype],o),r}};function kn(e){const{inputs:{x:n},backend:t}=e,a=t.makeOutput(n.shape,n.dtype),r=t.typedArrayFromHeap(n);return t.typedArrayFromHeap(a).set(r),a}const vn={kernelName:o,backendName:"wasm",kernelFunc:kn};let Sn;function Mn(e){const{inputs:n,backend:t,attrs:a}=e,[r,s]=function(e,n){const t=[],a=[];for(let r=0;r<e.length;++r)1!==e[r]&&t.push(e[r]),1!==e[n[r]]&&a.push(n[r]);for(let e=0;e<a.length;++e){let n=-1;for(let t=0;t<a.length;++t)a[t]>=e&&(-1===n||a[n]>a[t])&&(n=t);a[n]=e}return[t,a]}(n.x.shape,a.perm);let u=!0;for(let e=0;e<s.length;e++)s[e]!==e&&(u=!1);const o=function(e,n){const t=new Array(e.length);for(let a=0;a<t.length;a++)t[a]=e[n[a]];return t}(n.x.shape,a.perm),i={dataId:n.x.dataId,shape:r,dtype:n.x.dtype};if(u){const e=kn({inputs:n,backend:t});return e.shape=o,e}const d=t.makeOutput(o,i.dtype),c=t.dataIdMap.get(i.dataId).id,l=t.dataIdMap.get(d.dataId).id,p=new Uint8Array(new Int32Array(s).buffer),m=new Uint8Array(new Int32Array(i.shape).buffer);return Sn(c,m,i.shape.length,pn[i.dtype],l,p,s.length),d}const En={kernelName:i,backendName:"wasm",kernelFunc:Mn,setupFunc:function(e){Sn=e.wasm.cwrap(i,null,["number","array","number","number","number","array","number"])}};function An(e,n,a){const s=e.shape,u=e.shape.length,o=t.parseAxisParam(n,s);let i=o;const d=r.getAxesPermutation(i,u);let c=null,l=!1;if(null!=d){const n=new Array(u);for(let e=0;e<n.length;e++)n[e]=s[d[e]];i=r.getInnerMostAxes(i.length,u),c=Mn({inputs:{x:e},attrs:{perm:d},backend:a});const t=a.dataIdMap.get(e.dataId).id;a.dataIdMap.get(c.dataId).id!==t&&(l=!0)}return{transposed:c,originalAxes:o,axes:i,inputWasTransposed:l}}let xn;const Nn={kernelName:d,backendName:"wasm",setupFunc:function(e){xn=e.wasm.cwrap(d,null,["number, number, number"])},kernelFunc:function(e){const{backend:n,inputs:a,attrs:s}=e,{axis:u,keepDims:o}=s,{x:i}=a;let d=n.dataIdMap.get(i.dataId).id,c=i;const{transposed:l,axes:p,originalAxes:m,inputWasTransposed:f}=An(i,u,n);if(f){c=l,d=n.dataIdMap.get(l.dataId).id}const h=c.shape.length;r.assertAxesAreInnerMostDims("all",p,h);const[b,y]=r.computeOutAndReduceShapes(c.shape,p),g=t.sizeFromShape(y),_=n.makeOutput(b,i.dtype);if(0!==t.sizeFromShape(c.shape)){const e=n.dataIdMap.get(_.dataId).id;xn(d,g,e)}if(f&&n.disposeData(l.dataId),o){const e=r.expandShapeToKeepDim(_.shape,m);_.shape=e}return _}};let Fn;const On={kernelName:c,backendName:"wasm",setupFunc:function(e){Fn=e.wasm.cwrap(c,null,["number, number, number"])},kernelFunc:function(e){const{backend:n,inputs:a,attrs:s}=e,{axis:u,keepDims:o}=s,{x:i}=a;let d=n.dataIdMap.get(i.dataId).id,c=i;const{transposed:l,axes:p,originalAxes:m,inputWasTransposed:f}=An(i,u,n);if(f){c=l,d=n.dataIdMap.get(l.dataId).id}const h=c.shape.length;r.assertAxesAreInnerMostDims("any",p,h);const[b,y]=r.computeOutAndReduceShapes(c.shape,p),g=t.sizeFromShape(y),_=n.makeOutput(b,i.dtype);if(0!==t.sizeFromShape(c.shape)){const e=n.dataIdMap.get(_.dataId).id;Fn(d,g,e)}if(f&&n.disposeData(l.dataId),o){const e=r.expandShapeToKeepDim(_.shape,m);_.shape=e}return _}};let Tn;const Rn={kernelName:l,backendName:"wasm",kernelFunc:function(e){const{backend:n,inputs:a,attrs:r}=e,{axis:s}=r,{x:u}=a,o=n.dataIdMap.get(u.dataId).id;let i=o,d=u;const{transposed:c,axes:l,inputWasTransposed:p}=An(u,s,n);if(p){const e=n.dataIdMap.get(c.dataId).id;e!==o&&(d=c,i=e)}const m=d.shape.slice(0,-1),f=n.makeOutput(m,"int32"),h=n.dataIdMap.get(f.dataId).id,b=t.sizeFromShape(f.shape),y=d.shape[l[0]];return Tn(i,pn[d.dtype],b,y,h),p&&n.disposeData(c.dataId),f},setupFunc:function(e){Tn=e.wasm.cwrap(l,null,["number","number","number","number","number"])}};let Dn;const Cn={kernelName:p,backendName:"wasm",setupFunc:function(e){Dn=e.wasm.cwrap(p,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){const{inputs:n,attrs:t,backend:a}=e,s=n.x,u=a.dataIdMap.get(s.dataId).id,{filterSize:o,strides:i,pad:d,dimRoundingMode:c}=t,l=r.computePool2DInfo(s.shape,o,i,1,d,c),p=l.filterHeight,m=l.filterWidth,f=l.padInfo.top,h=l.padInfo.right,b=l.padInfo.bottom,y=l.padInfo.left,g=l.strideHeight,_=l.strideWidth,w=l.inChannels;if("channelsLast"!==l.dataFormat)throw new Error(`wasm backend does not support dataFormat:'${l.dataFormat}'. Please use 'channelsLast'.`);if(1!==l.dilationWidth||1!==l.dilationHeight)throw new Error(`was backend only supports average pooling with dilation = [1, 1], got [${l.dilationHeight}, ${l.dilationWidth}].`);const I=a.makeOutput(l.outShape,"float32"),k=a.dataIdMap.get(I.dataId).id;return Dn(u,s.shape[0],s.shape[1],s.shape[2],p,m,f,h,b,y,g,_,w,k),I}};function Pn(e){const{inputs:n,attrs:a}=e,{x:r}=n,{shape:s}=a,u=t.sizeFromShape(r.shape),o=t.inferFromImplicitShape(s,u);return t.assert(u===t.sizeFromShape(o),(()=>`new shape: ${o}, old shape: ${r.shape}. New shape and old shape must have the same number of elements.`)),e.backend.incRef(r.dataId),{dataId:r.dataId,shape:o,dtype:r.dtype}}const Wn={kernelName:m,backendName:"wasm",kernelFunc:Pn};let Ln;const Hn={kernelName:f,backendName:"wasm",setupFunc:function(e){Ln=e.wasm.cwrap(f,null,["number","array","number","number","array","number","number","number","number"])},kernelFunc:function(e){const{inputs:a,backend:r,attrs:s}=e,{a:u,b:o}=a,{transposeA:i,transposeB:d}=s;if("float32"!==u.dtype||"float32"!==o.dtype)throw new Error("BatchMatMul for non non-float32 tensors not yet supported.");const c=u.shape.length,l=o.shape.length,p=i?u.shape[c-2]:u.shape[c-1],m=d?o.shape[l-1]:o.shape[l-2],f=i?u.shape[c-1]:u.shape[c-2],h=d?o.shape[l-2]:o.shape[l-1],b=u.shape.slice(0,-2),y=o.shape.slice(0,-2),g=t.sizeFromShape(b),_=t.sizeFromShape(y),w=n.assertAndGetBroadcastShape(u.shape.slice(0,-2),o.shape.slice(0,-2)).concat([f,h]);t.assert(p===m,(()=>`Error in matMul: inner shapes (${p}) and (${m}) of Tensors with shapes ${u.shape} and ${o.shape} and transposeA=${i} and transposeB=${d} must match.`));const I=d?[_,h,m]:[_,m,h],k=Pn({inputs:{x:u},backend:r,attrs:{shape:i?[g,p,f]:[g,f,p]}}),v=Pn({inputs:{x:o},backend:r,attrs:{shape:I}}),S=r.dataIdMap.get(k.dataId).id,M=r.dataIdMap.get(v.dataId).id,E=i?k.shape[2]:k.shape[1],A=d?v.shape[1]:v.shape[2],x=Math.max(g,_),N=r.makeOutput([x,E,A],k.dtype),F=r.dataIdMap.get(N.dataId).id,O=new Uint8Array(new Int32Array(k.shape).buffer),T=new Uint8Array(new Int32Array(v.shape).buffer);return Ln(S,O,k.shape.length,M,T,v.shape.length,i,d,F),r.disposeData(k.dataId),r.disposeData(v.dataId),N.shape=w,N}};function Un(e,n,a,s,u){const o=h.isSliceContinous(s,n,a),i=t.sizeFromShape(a),d=t.computeStrides(s);if(o){const t=h.computeFlatOffset(n,d);return"string"===u?e.slice(t,t+i):e.subarray(t,t+i)}const c="string"===u?r.fromUint8ToStringArray(e):e,l=b(s,u,c),p=b(a,u);for(let e=0;e<p.size;++e){const t=p.indexToLoc(e),a=t.map(((e,t)=>e+n[t]));p.set(l.get(...a),...t)}return"string"===u?r.fromStringArrayToUint8(p.values):p.values}function zn(e){const{inputs:{x:n},attrs:{begin:a,size:r},backend:s}=e,[u,o]=h.parseSliceParams(n,a,r),i=h.isSliceContinous(n.shape,u,o),d=s.readSync(n.dataId),c=s.makeOutput(o,n.dtype),l=t.computeStrides(n.shape),p=s.dataIdMap.get(c.dataId);if(i){const e=h.computeFlatOffset(u,l);if("string"===n.dtype)p.stringBytes=d.slice(e,e+t.sizeFromShape(o));else{s.typedArrayFromHeap(c).set(d.subarray(e,e+t.sizeFromShape(o)))}return c}if("string"===n.dtype){const e=Un(d,u,o,n.shape,n.dtype);return p.stringBytes=e,c}const m=s.typedArrayFromHeap(c),f=n.shape.length;if(2===f)!function(e,n,t,a,r){let s=0;const u=a[0],o=a[1],i=u+r[0];for(let a=u;a<i;a++){const u=a*n+o;t.set(e.subarray(u,u+r[1]),s),s+=r[1]}}(d,l[0],m,u,o);else if(3===f)!function(e,n,t,a,r,s){let u=0;const o=r[0],i=r[1],d=r[2],c=o+s[0],l=i+s[1];for(let r=o;r<c;r++)for(let o=i;o<l;o++){const i=r*n+o*t+d;a.set(e.subarray(i,i+s[2]),u),u+=s[2]}}(d,l[0],l[1],m,u,o);else if(4===f)!function(e,n,t,a,r,s,u){let o=0;const i=s[0],d=s[1],c=s[2],l=i+u[0],p=d+u[1],m=c+u[2],f=s[3];for(let s=i;s<l;s++)for(let i=d;i<p;i++)for(let d=c;d<m;d++){const c=s*n+i*t+d*a+f;r.set(e.subarray(c,c+u[3]),o),o+=u[3]}}(d,l[0],l[1],l[2],m,u,o);else{const e=Un(d,u,o,n.shape,n.dtype);m.set(e)}return c}const Bn={kernelName:y,backendName:"wasm",kernelFunc:zn};const jn={kernelName:g,backendName:"wasm",kernelFunc:function(e){const{inputs:n,backend:t,attrs:a}=e,{x:s}=n,{blockShape:u,crops:o}=a,i=u.reduce(((e,n)=>e*n)),d=r.getReshaped(s.shape,u,i),c=r.getPermuted(d.length,u.length),l=r.getReshapedPermuted(s.shape,u,i),p=r.getSliceBeginCoords(o,u.length),m=r.getSliceSize(l,o,u.length),f=Pn({inputs:{x:s},backend:t,attrs:{shape:d}}),h=Mn({inputs:{x:f},backend:t,attrs:{perm:c}}),b=zn({inputs:{x:Pn({inputs:{x:h},backend:t,attrs:{shape:l}})},backend:t,attrs:{begin:p,size:m}});return t.disposeData(f.dataId),t.disposeData(h.dataId),t.disposeData(f.dataId),b}};function Gn(e){const{inputs:{x:n},attrs:{dtype:t},backend:a}=e,r=a.makeOutput(n.shape,t),s=a.typedArrayFromHeap(n);return a.typedArrayFromHeap(r).set(s),r}const Vn={kernelName:_,backendName:"wasm",kernelFunc:Gn},qn=bn(w);let $n;const Kn={kernelName:I,backendName:"wasm",setupFunc:function(e){$n=e.wasm.cwrap(I,null,["number","number","number","number"])},kernelFunc:function(e){const{inputs:n,backend:t,attrs:a}=e,{x:r}=n,{clipValueMin:s,clipValueMax:u}=a,o=t.dataIdMap.get(r.dataId).id,i=t.makeOutput(r.shape,r.dtype),d=t.dataIdMap.get(i.dataId).id;return $n(o,s,u,d),i}};function Xn(e){const{inputs:n,backend:a}=e,s=t.parseAxisParam(e.attrs.axis,n[0].shape)[0];let u=r.computeOutShape(n.map((e=>e.shape)),s);const o=n.filter((e=>t.sizeFromShape(e.shape)>0));if(1===o.length)return kn({inputs:{x:o[0]},backend:a});const i=a.makeOutput(u,n[0].dtype);if(0===t.sizeFromShape(u))return i;const d=o.map((e=>e.shape));if(r.assertParamsConsistent(d,s),"string"===o[0].dtype){const e=o.map((e=>{const n=t.sizeFromShape(e.shape.slice(s));return Pn({inputs:{x:e},backend:a,attrs:{shape:[-1,n]}})})),d=e.map((e=>({vals:a.readSync(e.dataId),shape:e.shape})));u=r.computeOutShape(e.map((e=>e.shape)),1);const c=1===e[0].shape[0],l=function(e,n,a,s){const u=t.getArrayFromDType(a,t.sizeFromShape(n));if(s&&"string"!==a){let n=0;e.forEach((e=>{const a=t.sizeFromShape(e.shape);u.set(e.vals,n),n+=a}))}else{let t=0;e.forEach((e=>{const s="string"===a?r.fromUint8ToStringArray(e.vals):e.vals;let o=0;for(let a=0;a<e.shape[0];++a){const r=a*n[1]+t;for(let n=0;n<e.shape[1];++n)u[r+n]=s[o++]}t+=e.shape[1]}))}return u}(d,u,n[0].dtype,c),p=r.computeOutShape(o.map((e=>e.shape)),s);i.shape=p;return a.dataIdMap.get(i.dataId).stringBytes=r.fromStringArrayToUint8(l),e.forEach((e=>a.disposeData(e.dataId))),i}const c=t.sizeFromShape(o[0].shape.slice(0,s));let l=0;const p=o.map((e=>{const n=t.sizeFromShape(e.shape.slice(s));return l+=n,n})),m=o.map((e=>a.typedArrayFromHeap(e))),f=a.typedArrayFromHeap(i);for(let e=0;e<c;e++){let n=e*l;for(let t=0;t<m.length;t++){const a=p[t],r=e*a,s=m[t].subarray(r,r+a);f.set(s,n),n+=a}}return i}const Qn={kernelName:k,backendName:"wasm",kernelFunc:Xn};let Yn;const Zn={kernelName:v,backendName:"wasm",setupFunc:function(e){Yn=e.wasm.cwrap(v,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){const{inputs:n,attrs:t,backend:a}=e,{x:s,filter:u}=n,o=a.dataIdMap.get(s.dataId).id,i=a.dataIdMap.get(u.dataId).id,{strides:d,dilations:c,pad:l,dimRoundingMode:p,dataFormat:m}=t,f=r.convertConv2DDataFormat(m),h=r.computeConv2DInfo(s.shape,u.shape,d,c,l,p,!1,f),b=h.filterHeight,y=h.filterWidth,g=h.padInfo.top,_=h.padInfo.right,w=h.padInfo.bottom,I=h.padInfo.left,k=h.dilationHeight,v=h.dilationWidth,S=h.strideHeight,M=h.strideWidth,E=h.inChannels,A=h.outChannels,x="SAME"===h.padInfo.type?1:0;if("channelsLast"!==h.dataFormat)throw new Error(`wasm backend Conv2D does not support dataFormat:'${h.dataFormat}'. Please use 'channelsLast'.`);const N=a.makeOutput(h.outShape,"float32"),F=a.dataIdMap.get(N.dataId).id;return Yn(o,s.shape[0],s.shape[1],s.shape[2],i,b,y,g,_,w,I,x,k,v,S,M,E,A,F),N}};let Jn;const et={kernelName:S,backendName:"wasm",setupFunc:function(e){Jn=e.wasm.cwrap(S,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){const{backend:n,inputs:a,attrs:s}=e,{dy:u,filter:o}=a,{strides:i,pad:d,dataFormat:c,dimRoundingMode:l,inputShape:p}=s,m=r.convertConv2DDataFormat(c),f=r.computeConv2DInfo(p,o.shape,i,1,d,l,!1,m),{batchSize:h,filterHeight:b,filterWidth:y,inChannels:g,inHeight:_,inWidth:w,outChannels:I,outHeight:k,outWidth:v,strideHeight:S,strideWidth:M}=f,E=b-1-f.padInfo.top,A=y-1-f.padInfo.left,x="channelsLast"===f.dataFormat,N=t.computeStrides(f.inShape),F=t.computeStrides(u.shape),[O,T,R]=t.computeStrides(o.shape),D=N[0],C=x?N[1]:N[2],P=x?N[2]:1,W=x?1:N[1],L=F[0],H=x?F[1]:F[2],U=x?F[2]:1,z=x?1:F[1],B=n.makeOutput(f.inShape,"float32"),j=n.dataIdMap.get(B.dataId).id,G=n.dataIdMap.get(u.dataId).id,V=n.dataIdMap.get(o.dataId).id;return Jn(G,V,h,b,y,_,w,g,k,v,I,S,M,E,A,O,T,R,D,C,P,W,L,H,U,z,j),B}},nt=bn(M),tt=bn(E);var at;let rt;!function(e){e[e.bilinear=0]="bilinear",e[e.nearest=1]="nearest"}(at||(at={}));const st={kernelName:A,backendName:"wasm",setupFunc:function(e){rt=e.wasm.cwrap(A,null,["number","number","number","number","array","number","number","number","number","number"])},kernelFunc:function(e){const{backend:n,inputs:t,attrs:a}=e,{method:r,extrapolationValue:s,cropSize:u}=a,{image:o,boxes:i,boxInd:d}=t,c=i.shape[0],[l,p]=u,m=[c,l,p,o.shape[3]];let f,h=n.dataIdMap.get(o.dataId);"float32"!==o.dtype&&(f=Gn({backend:n,inputs:{x:o},attrs:{dtype:"float32"}}),h=n.dataIdMap.get(f.dataId));const b=h.id,y=n.dataIdMap.get(i.dataId).id,g=n.dataIdMap.get(d.dataId).id,_=n.makeOutput(m,"float32"),w=n.dataIdMap.get(_.dataId).id,I=new Uint8Array(new Int32Array(o.shape).buffer);return rt(b,y,g,c,I,l,p,at[r],s,w),null!=f&&n.disposeData(f.dataId),_}};let ut;const ot={kernelName:x,backendName:"wasm",setupFunc:function(e){ut=e.wasm.cwrap(x,null,["number","number","number","number","number","number"])},kernelFunc:function(e){const{inputs:n,backend:a,attrs:s}=e,{x:u}=n,{axis:o,exclusive:i,reverse:d}=s,c=u.shape.length;t.assert("float32"===u.dtype||"int32"===u.dtype,(()=>`cumsum does not support ${u.dtype} tensors in the WASM backend`));const l=r.getAxesPermutation([o],c);let p=u;null!==l&&(p=Mn({inputs:{x:u},attrs:{perm:l},backend:a}));const m=r.getInnerMostAxes(1,c)[0];r.assertAxesAreInnerMostDims("cumsum",[m],c);const f=a.makeOutput(p.shape,p.dtype),h=p.shape[m],b=a.dataIdMap.get(p.dataId).id,y=a.dataIdMap.get(f.dataId).id;ut(b,i?1:0,d?1:0,h,y,pn[u.dtype]);let g=f;if(null!==l){g=Mn({inputs:{x:f},attrs:{perm:r.getUndoAxesPermutation(l)},backend:a}),a.disposeData(p.dataId),a.disposeData(f.dataId)}return g}};let it;const dt={kernelName:N,backendName:"wasm",setupFunc:function(e){it=e.wasm.cwrap(N,null,["number","number","number","array","number","array","array","number","number"])},kernelFunc:function(e){const{backend:n,inputs:a,attrs:r}=e,{x:s}=a,{blockSize:u,dataFormat:o}=r,i=s.shape[0],d=("NHWC"===o?s.shape[1]:s.shape[2])*u,c=("NHWC"===o?s.shape[2]:s.shape[3])*u,l=("NHWC"===o?s.shape[3]:s.shape[1])/(u*u),p="NHWC"===o?[i,d,c,l]:[i,l,d,c],m=n.makeOutput(p,"float32"),f=n.dataIdMap.get(s.dataId).id,h=new Uint8Array(new Int32Array(t.computeStrides(s.shape)).buffer),b=new Uint8Array(new Int32Array(p).buffer),y=new Uint8Array(new Int32Array(t.computeStrides(p)).buffer),g=n.dataIdMap.get(m.dataId).id;return it(f,u,"NHWC"===o?1:0,h,s.shape.length-1,b,y,p.length,g),m}};let ct;const lt={kernelName:F,backendName:"wasm",setupFunc:function(e){ct=e.wasm.cwrap(F,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){const{inputs:n,attrs:t,backend:a}=e,{x:s,filter:u}=n,o=a.dataIdMap.get(s.dataId).id,i=a.dataIdMap.get(u.dataId).id,{strides:d,dilations:c,pad:l,dimRoundingMode:p}=t,m=null==c?[1,1]:c,f=r.computeConv2DInfo(s.shape,u.shape,d,m,l,p,!0),h=f.filterHeight,b=f.filterWidth,y=f.padInfo.top,g=f.padInfo.right,_=f.padInfo.bottom,w=f.padInfo.left,I=f.dilationHeight,k=f.dilationWidth,v=f.strideHeight,S=f.strideWidth,M=f.inChannels,E=f.outChannels,A="SAME"===f.padInfo.type?1:0;if("channelsLast"!==f.dataFormat)throw new Error(`wasm backend DepthwiseConv2dNative does not support dataFormat:'${f.dataFormat}'. Please use 'channelsLast'.`);const x=a.makeOutput(f.outShape,"float32"),N=a.dataIdMap.get(x.dataId).id;return ct(o,s.shape[0],s.shape[1],s.shape[2],i,h,b,y,g,_,w,A,I,k,v,S,M,E,N),x}},pt=bn(O),mt=gn(T,0,"bool"),ft=bn(R,"float32");function ht(e){const{inputs:n,attrs:a,backend:r}=e,{input:s}=n,{dim:u}=a,o=s.shape.length,i=s.shape.slice();let d=u;return u<0&&(t.assert(-(o+1)<=u,(()=>`Axis must be in the interval [${-(o+1)}, ${o}]`)),d=o+u+1),i.splice(d,0,1),Pn({inputs:{x:s},backend:r,attrs:{shape:i}})}const bt={kernelName:D,backendName:"wasm",kernelFunc:ht};function yt(e){const{attrs:{shape:n,value:t,dtype:a},backend:r}=e,s=r.makeOutput(n,a);return r.typedArrayFromHeap(s).fill(t),s}const gt={kernelName:C,backendName:"wasm",kernelFunc:yt};let _t;const wt={kernelName:P,backendName:"wasm",kernelFunc:function(e){const{inputs:n,backend:t}=e,{image:a}=n,r=t.makeOutput(a.shape,a.dtype),s=t.dataIdMap.get(a.dataId).id,u=t.dataIdMap.get(r.dataId).id,[o,i,d,c]=a.shape;return _t(s,o,i,d,c,u),r},setupFunc:function(e){_t=e.wasm.cwrap(P,null,["number","number","number","number","number","number"])}},It=bn(W),kt=gn(L);let vt;const St={kernelName:H,backendName:"wasm",setupFunc:function(e){vt=e.wasm.cwrap(H,null,["number","number","number","number","number","number","number"])},kernelFunc:function(e){const{backend:n,inputs:a,attrs:r}=e,{varianceEpsilon:s}=r,{x:u,mean:o,variance:i,offset:d,scale:c}=a,l=n.dataIdMap.get(u.dataId).id,p=n.dataIdMap.get(o.dataId).id,m=n.dataIdMap.get(i.dataId).id,f=null!=d?n.dataIdMap.get(d.dataId).id:0,h=null!=c?n.dataIdMap.get(c.dataId).id:0,b=n.makeOutput(u.shape,u.dtype);if(0===t.sizeFromShape(u.shape))return b;const y=n.dataIdMap.get(b.dataId).id;return vt(l,p,m,f,h,s,y),b}};let Mt;const Et={kernelName:U,backendName:"wasm",setupFunc:function(e){Mt=e.wasm.cwrap(U,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){const{inputs:n,attrs:t,backend:a}=e,{x:s,filter:u,bias:o,preluActivationWeights:i}=n,{strides:d,pad:c,dilations:l,dataFormat:p,dimRoundingMode:m,activation:f,leakyreluAlpha:h}=t,b=r.computeConv2DInfo(s.shape,u.shape,d,l,c,m),y=mn[f];if(null==y)throw new Error(`${f} activation not yet supported for FusedConv2D in the wasm backend.`);const g=a.dataIdMap.get(s.dataId).id,_=a.dataIdMap.get(u.dataId).id,w=b.outChannels;let I=0;if(null!=o){const e=a.dataIdMap.get(o.dataId);if(1!==e.shape.length)throw new Error(`FusedConv2D only supports rank-1 bias but got rank ${e.shape.length}.`);if(e.shape[0]!==w)throw new Error(`FusedConv2D bias shape (${e.shape}) does not match the number of output channels (${w})`);I=e.id}const k=b.filterHeight,v=b.filterWidth,S=b.padInfo.top,M=b.padInfo.right,E=b.padInfo.bottom,A=b.padInfo.left,x=b.dilationHeight,N=b.dilationWidth,F=b.strideHeight,O=b.strideWidth,T=b.inChannels,R="SAME"===b.padInfo.type?1:0,D=b.batchSize,C=b.inHeight,P=b.inWidth;if("NHWC"!==p)throw new Error(`wasm backend FusedConv2D does not support dataFormat:'${p}'. Please use 'NHWC'.`);const W=a.makeOutput(b.outShape,"float32"),L=a.dataIdMap.get(W.dataId).id,H=null==i?0:a.dataIdMap.get(i.dataId).id;return Mt(g,D,C,P,_,k,v,I,S,M,E,A,R,x,N,F,O,T,w,y,H,h||0,L),W}};let At;const xt={kernelName:z,backendName:"wasm",setupFunc:function(e){At=e.wasm.cwrap(z,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){const{inputs:n,attrs:t,backend:a}=e,{x:s,filter:u,bias:o,preluActivationWeights:i}=n,{strides:d,pad:c,dilations:l,dataFormat:p,dimRoundingMode:m,activation:f,leakyreluAlpha:h}=t,b=r.computeConv2DInfo(s.shape,u.shape,d,l,c,m,!0),y=mn[f];if(null==y)throw new Error(`${f} activation not yet supported for FusedDepthwiseConv2D in the wasm backend.`);const g=a.dataIdMap.get(s.dataId).id,_=a.dataIdMap.get(u.dataId).id,w=b.outChannels;let I=0;if(null!=o){const e=a.dataIdMap.get(o.dataId);if(1!==e.shape.length)throw new Error(`FusedDepthwiseConv2D only supports rank-1 bias but got rank ${e.shape.length}.`);if(e.shape[0]!==w)throw new Error(`FusedDepthwiseConv2D bias shape (${e.shape}) does not match the number of output channels (${w})`);I=e.id}const k=b.filterHeight,v=b.filterWidth,S=b.padInfo.top,M=b.padInfo.right,E=b.padInfo.bottom,A=b.padInfo.left,x=b.dilationHeight,N=b.dilationWidth,F=b.strideHeight,O=b.strideWidth,T=b.inChannels,R="SAME"===b.padInfo.type?1:0,D=b.batchSize,C=b.inHeight,P=b.inWidth;if("NHWC"!==p)throw new Error(`wasm backend FusedDepthwiseConv2D does not support dataFormat:'${p}'. Please use 'NHWC'.`);const W=a.makeOutput(b.outShape,"float32"),L=a.dataIdMap.get(W.dataId).id,H=null==i?0:a.dataIdMap.get(i.dataId).id;return At(g,D,C,P,_,k,v,I,S,M,E,A,R,x,N,F,O,T,w,y,H,h||0,L),W}};let Nt;const Ft={kernelName:B,backendName:"wasm",setupFunc:function(e){Nt=e.wasm.cwrap(B,null,["number","number","number","number","number","number","array","number"])},kernelFunc:function(e){const{backend:n,inputs:t}=e,{params:a,indices:r}=t,[s,u,o,i]=j.prepareAndValidate(a,r),d=n.makeOutput(s,a.dtype);if(0===u)return d;const c=r.shape,l=c[c.length-1],p=n.dataIdMap.get(a.dataId).id,m=n.dataIdMap.get(r.dataId).id,f=new Uint8Array(new Int32Array(i).buffer),h=n.dataIdMap.get(d.dataId).id;return Nt(p,pn[a.dtype],m,u,l,o,f,h),d}};let Ot;const Tt={kernelName:G,backendName:"wasm",setupFunc:function(e){Ot=e.wasm.cwrap("Gather",null,["number","number","array","number","number","number","array","number"])},kernelFunc:function(e){const{backend:n,inputs:a,attrs:s}=e,{x:u,indices:o}=a,{axis:i,batchDims:d}=s,c=t.parseAxisParam(i,u.shape)[0],l=n.readSync(o.dataId),p=u.shape[c];for(let e=0;e<l.length;++e){const n=l[e];t.assert(n<=p-1&&n>=0,(()=>`GatherV2: the index value ${n} is not in [0, ${p-1}]`))}const m=r.segment_util.collectGatherOpShapeInfo(u,o,c,d),f=Pn({inputs:{x:u},attrs:{shape:[m.batchSize,m.outerSize,m.dimSize,m.sliceSize]},backend:n}),h=t.sizeFromShape(o.shape),b=Pn({inputs:{x:o},attrs:{shape:[m.batchSize,h/m.batchSize]},backend:n}),y=[m.batchSize,m.outerSize,h/m.batchSize,m.sliceSize],g=n.makeOutput(y,u.dtype);if(0===t.sizeFromShape(u.shape))return g;const _=f.shape.length-1,w=n.dataIdMap.get(f.dataId).id,I=n.dataIdMap.get(b.dataId).id,k=n.dataIdMap.get(g.dataId).id,v=new Uint8Array(new Int32Array(t.computeStrides(f.shape)).buffer),S=new Uint8Array(new Int32Array(t.computeStrides(y)).buffer);return Ot(w,pn[u.dtype],v,_,I,m.batchSize,S,k),n.disposeData(f.dataId),n.disposeData(b.dataId),g.shape=m.outputShape,g}},Rt=gn(V,0,"bool"),Dt=gn(q,0,"bool");let Ct;const Pt={kernelName:$,backendName:"wasm",setupFunc:function(e){Ct=e.wasm.cwrap($,null,["number","number","number","number"])},kernelFunc:function(e){const{inputs:{x:n},attrs:{alpha:a},backend:r}=e,s=r.dataIdMap.get(n.dataId).id,u=r.makeOutput(n.shape,"float32");if(0!==t.sizeFromShape(n.shape)){const e=r.dataIdMap.get(u.dataId).id;Ct(s,pn[n.dtype],a,e)}return u}},Wt=gn(K,0,"bool"),Lt=gn(X,0,"bool"),Ht=bn(Q),Ut=gn(Y,0,"bool");let zt;const Bt={kernelName:Z,backendName:"wasm",setupFunc:function(e){zt=e.wasm.cwrap(Z,null,["number","number","number","number"])},kernelFunc:function(e){const{backend:n,inputs:a,attrs:s}=e,{reductionIndices:u,keepDims:o}=s,{x:i}=a;let d=n.dataIdMap.get(i.dataId).id,c=i;const{transposed:l,axes:p,originalAxes:m,inputWasTransposed:f}=An(i,u,n);if(f){c=l,d=n.dataIdMap.get(l.dataId).id}const h=c.shape.length;r.assertAxesAreInnerMostDims("max",p,h);const[b,y]=r.computeOutAndReduceShapes(c.shape,p),g=t.sizeFromShape(y),_=n.makeOutput(b,i.dtype);if(0!==t.sizeFromShape(c.shape)){const e=n.dataIdMap.get(_.dataId).id;zt(d,pn[i.dtype],g,e)}if(f&&n.disposeData(l.dataId),o){const e=r.expandShapeToKeepDim(_.shape,m);_.shape=e}return _}},jt=gn(J);let Gt;const Vt={kernelName:ee,backendName:"wasm",setupFunc:function(e){Gt=e.wasm.cwrap(ee,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){const{inputs:n,attrs:a,backend:s}=e,u=n.x,o=s.dataIdMap.get(u.dataId).id;t.assert("float32"===u.dtype,(()=>`Error in MaxPool: only float32 input is supported. Got ${u.dtype}.`));const{filterSize:i,strides:d,pad:c,dimRoundingMode:l}=a,p=r.computePool2DInfo(u.shape,i,d,1,c,l),m=p.filterHeight,f=p.filterWidth,h=p.padInfo.top,b=p.padInfo.right,y=p.padInfo.bottom,g=p.padInfo.left,_=p.dilationHeight,w=p.dilationWidth,I=p.strideHeight,k=p.strideWidth,v=p.inChannels,S=p.outChannels;if("channelsLast"!==p.dataFormat)throw new Error(`wasm backend does not support dataFormat:'${p.dataFormat}'. Please use 'channelsLast'.`);const M=s.makeOutput(p.outShape,"float32"),E=s.dataIdMap.get(M.dataId).id;return Gt(o,u.shape[0],u.shape[1],u.shape[2],m,f,h,b,y,g,_,w,I,k,v,S,E),M}};let qt;const $t={kernelName:ne,backendName:"wasm",setupFunc:function(e){qt=e.wasm.cwrap(ne,null,["number, number, number"])},kernelFunc:function(e){const{backend:n,inputs:a,attrs:s}=e,{axis:u,keepDims:o}=s,{x:i}=a,d=n.dataIdMap.get(i.dataId).id;let c=d,l=i;const{transposed:p,axes:m,originalAxes:f,inputWasTransposed:h}=An(i,u,n);let b=m;if(h){const e=n.dataIdMap.get(p.dataId).id;e!==d&&(l=p,c=e,b=r.getInnerMostAxes(b.length,l.shape.length))}r.assertAxesAreInnerMostDims("mean",b,l.shape.length);const[y,g]=r.computeOutAndReduceShapes(l.shape,b),_=t.sizeFromShape(g);let w=l;"float32"!==l.dtype&&(w=Gn({backend:n,inputs:{x:l},attrs:{dtype:"float32"}}),c=n.dataIdMap.get(w.dataId).id);const I=n.makeOutput(y,"float32");if(0!==t.sizeFromShape(l.shape)){const e=n.dataIdMap.get(I.dataId).id;qt(c,_,e)}if(h&&n.disposeData(p.dataId),o){const e=r.expandShapeToKeepDim(I.shape,f);I.shape=e}return"float32"!==l.dtype&&n.disposeData(w.dataId),I}};let Kt;const Xt={kernelName:te,backendName:"wasm",setupFunc:function(e){Kt=e.wasm.cwrap(te,null,["number","number","number","number"])},kernelFunc:function(e){const{backend:n,inputs:a,attrs:s}=e,{axis:u,keepDims:o}=s,{x:i}=a,d=n.dataIdMap.get(i.dataId).id;let c=d,l=i;const{transposed:p,axes:m,originalAxes:f,inputWasTransposed:h}=An(i,u,n);if(h){const e=n.dataIdMap.get(p.dataId).id;e!==d&&(l=p,c=e)}const b=l.shape.length;r.assertAxesAreInnerMostDims("min",m,b);const[y,g]=r.computeOutAndReduceShapes(l.shape,m),_=t.sizeFromShape(g),w=n.makeOutput(y,l.dtype);if(0!==t.sizeFromShape(l.shape)){const e=n.dataIdMap.get(w.dataId).id;Kt(c,pn[i.dtype],_,e)}if(h&&n.disposeData(p.dataId),o){const e=r.expandShapeToKeepDim(w.shape,f);w.shape=e}return w}},Qt=gn(ae);var Yt;let Zt;!function(e){e[e.reflect=0]="reflect",e[e.symmetric=1]="symmetric"}(Yt||(Yt={}));const Jt={kernelName:re,backendName:"wasm",kernelFunc:function(e){const{inputs:{x:n},backend:t,attrs:{paddings:a,mode:r}}=e,s=a.map(((e,t)=>e[0]+n.shape[t]+e[1])),u=t.dataIdMap.get(n.dataId).id,o=t.makeOutput(s,n.dtype),i=t.dataIdMap.get(o.dataId).id,d=new Uint8Array(new Int32Array(n.shape).buffer),c=a.map((e=>e[0])),l=a.map((e=>e[1])),p=new Uint8Array(new Int32Array(c).buffer),m=new Uint8Array(new Int32Array(l).buffer);return Zt(u,d,n.shape.length,pn[n.dtype],p,m,Yt[r],i),o},setupFunc:function(e){Zt=e.wasm.cwrap(re,null,["number","array","number","number","array","array","number","number"])}},ea=gn(se),na=bn(ue);function ta(e,n){const t=new Int32Array(e.wasm.HEAPU8.buffer,n,4),a=t[0],r=t[1],s=t[2],u=t[3];return e.wasm._free(n),{pSelectedIndices:a,selectedSize:r,pSelectedScores:s,pValidOutputs:u}}let aa;const ra={kernelName:oe,backendName:"wasm",setupFunc:function(e){aa=e.wasm.cwrap(oe,"number",["number","number","number","number","number"])},kernelFunc:function(e){const{backend:n,inputs:t,attrs:a}=e,{iouThreshold:r,maxOutputSize:s,scoreThreshold:u}=a,{boxes:o,scores:i}=t,d=n.dataIdMap.get(o.dataId).id,c=n.dataIdMap.get(i.dataId).id,l=aa(d,c,s,r,u),{pSelectedIndices:p,selectedSize:m,pSelectedScores:f,pValidOutputs:h}=ta(n,l);return n.wasm._free(f),n.wasm._free(h),n.makeOutput([m],"int32",p)}};let sa;const ua={kernelName:ie,backendName:"wasm",setupFunc:function(e){sa=e.wasm.cwrap(ie,"number",["number","number","number","number","number","bool"])},kernelFunc:function(e){const{backend:n,inputs:t,attrs:a}=e,{iouThreshold:r,maxOutputSize:s,scoreThreshold:u,padToMaxOutputSize:o}=a,{boxes:i,scores:d}=t,c=n.dataIdMap.get(i.dataId).id,l=n.dataIdMap.get(d.dataId).id,p=sa(c,l,s,r,u,o),{pSelectedIndices:m,selectedSize:f,pSelectedScores:h,pValidOutputs:b}=ta(n,p);return n.wasm._free(h),[n.makeOutput([f],"int32",m),n.makeOutput([],"int32",b)]}};let oa;const ia={kernelName:de,backendName:"wasm",setupFunc:function(e){oa=e.wasm.cwrap(de,"number",["number","number","number","number","number","number"])},kernelFunc:function(e){const{backend:n,inputs:t,attrs:a}=e,{iouThreshold:r,maxOutputSize:s,scoreThreshold:u,softNmsSigma:o}=a,{boxes:i,scores:d}=t,c=n.dataIdMap.get(i.dataId).id,l=n.dataIdMap.get(d.dataId).id,p=oa(c,l,s,r,u,o),{pSelectedIndices:m,selectedSize:f,pSelectedScores:h,pValidOutputs:b}=ta(n,p);return n.wasm._free(b),[n.makeOutput([f],"int32",m),n.makeOutput([f],"float32",h)]}},da=gn(ce,0,"bool");let ca;const la={kernelName:le,backendName:"wasm",setupFunc:function(e){ca=e.wasm.cwrap(le,null,["number","number","number","number","number"])},kernelFunc:function(e){const{inputs:n,backend:t,attrs:a}=e,{indices:r}=n,{depth:s,onValue:u,offValue:o}=a,i=t.makeOutput([...r.shape,s],"int32"),d=t.dataIdMap.get(i.dataId).id,c=t.dataIdMap.get(r.dataId).id;return ca(c,s,u,o,d),i}};const pa={kernelName:pe,backendName:"wasm",kernelFunc:function(e){const{inputs:{x:n},backend:t}=e,a=t.makeOutput(n.shape,n.dtype);return t.typedArrayFromHeap(a).fill(1),a}};const ma={kernelName:me,backendName:"wasm",kernelFunc:function(e){const{inputs:n,backend:a,attrs:r}=e,{axis:s}=r;if(1===n.length)return ht({inputs:{input:n[0]},backend:a,attrs:{dim:s}});const u=n[0].shape,o=n[0].dtype;n.forEach((e=>{t.assertShapesMatch(u,e.shape,"All tensors passed to stack must have matching shapes"),t.assert(o===e.dtype,(()=>"All tensors passed to stack must have matching dtypes"))}));const i=[],d=Xn({inputs:n.map((e=>{const n=ht({inputs:{input:e},backend:a,attrs:{dim:s}});return i.push(n),n})),backend:a,attrs:{axis:s}});return i.forEach((e=>a.disposeData(e.dataId))),d}};let fa;const ha={kernelName:fe,backendName:"wasm",kernelFunc:function(e){const{inputs:{x:n},backend:a,attrs:{paddings:r,constantValue:s}}=e,u=r.map(((e,t)=>e[0]+n.shape[t]+e[1]));if(0===t.sizeFromShape(n.shape))return yt({backend:a,attrs:{shape:u,value:s,dtype:n.dtype}});const o=a.dataIdMap.get(n.dataId).id,i=a.makeOutput(u,n.dtype),d=a.dataIdMap.get(i.dataId).id,c=new Uint8Array(new Int32Array(n.shape).buffer),l=r.map((e=>e[0])),p=r.map((e=>e[1])),m=new Uint8Array(new Int32Array(l).buffer),f=new Uint8Array(new Int32Array(p).buffer);return fa(o,c,n.shape.length,pn[n.dtype],m,f,s,d),i},setupFunc:function(e){fa=e.wasm.cwrap(fe,null,["number","array","number","number","array","array","number","number"])}},ba=gn(he);let ya;const ga={kernelName:be,backendName:"wasm",setupFunc:function(e){ya=e.wasm.cwrap(be,null,["number","number","number"])},kernelFunc:function(e){const{inputs:n,backend:t}=e,{x:a,alpha:r}=n,s=t.dataIdMap.get(a.dataId).id,u=t.dataIdMap.get(r.dataId).id;let o=s;const i=a;let d=i;"float32"!==i.dtype&&(d=Gn({backend:t,inputs:{x:a},attrs:{dtype:"float32"}}),o=t.dataIdMap.get(d.dataId).id);const c=t.makeOutput(a.shape,"float32"),l=t.dataIdMap.get(c.dataId).id;return ya(o,u,l),"float32"!==i.dtype&&t.disposeData(d.dataId),c}};let _a;const wa={kernelName:ye,backendName:"wasm",setupFunc:function(e){_a=e.wasm.cwrap(ye,null,["number","number","number","number"])},kernelFunc:function(e){const{backend:n,inputs:a,attrs:s}=e,{axis:u,keepDims:o}=s,{x:i}=a,d=n.dataIdMap.get(i.dataId).id;let c=d,l=i;const{transposed:p,axes:m,originalAxes:f,inputWasTransposed:h}=An(i,u,n);let b=m;if(h){const e=n.dataIdMap.get(p.dataId).id;e!==d&&(l=p,c=e,b=r.getInnerMostAxes(b.length,l.shape.length))}r.assertAxesAreInnerMostDims("prod",b,l.shape.length);const[y,g]=r.computeOutAndReduceShapes(l.shape,b),_=t.sizeFromShape(g),w=n.makeOutput(y,l.dtype);if(0!==t.sizeFromShape(l.shape)){const e=n.dataIdMap.get(w.dataId).id;_a(c,_,pn[w.dtype],e)}if(h&&n.disposeData(p.dataId),o){const e=r.expandShapeToKeepDim(w.shape,f);w.shape=e}return w}},Ia={kernelName:ge,backendName:"wasm",kernelFunc:e=>{const{backend:n,attrs:a}=e,{start:r,stop:s,step:u,dtype:o}=a,i=function(e,n,a,r){if(e===n||e<n&&a<0||n<e&&a>1)return t.makeZerosTypedArray(0,r);const s=Math.abs(Math.ceil((n-e)/a)),u=t.makeZerosTypedArray(s,r);n<e&&1===a&&(a=-1),u[0]=e;for(let e=1;e<u.length;e++)u[e]=u[e-1]+a;return u}(r,s,u,o),d=n.makeOutput([i.length],o);return n.typedArrayFromHeap(d).set(i),d}},ka=gn(_e),va=bn(we),Sa=bn(Ie);let Ma;const Ea={kernelName:ke,backendName:"wasm",setupFunc:function(e){Ma=e.wasm.cwrap(ke,null,["number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){const{backend:n,inputs:a,attrs:r}=e,{images:s}=a,{alignCorners:u,halfPixelCenters:o,size:i}=r,[d,c]=i,[l,p,m,f]=s.shape,h=[l,d,c,f];let b,y=n.dataIdMap.get(s.dataId);"float32"!==y.dtype&&(b=Gn({backend:n,inputs:{x:s},attrs:{dtype:"float32"}}),y=n.dataIdMap.get(b.dataId));const g=y.id,_=n.makeOutput(h,"float32");if(0===t.sizeFromShape(s.shape))return _;const w=n.dataIdMap.get(_.dataId).id;return Ma(g,l,p,m,f,d,c,u?1:0,o?1:0,w),null!=b&&n.disposeData(b.dataId),_}};let Aa;const xa={kernelName:ve,backendName:"wasm",kernelFunc:function(e){const{inputs:n,backend:a,attrs:r}=e,{x:s}=n,{dims:u}=r,o=t.parseAxisParam(u,s.shape);if(0===s.shape.length)return kn({inputs:{x:s},backend:a});const i=a.makeOutput(s.shape,s.dtype),d=a.dataIdMap.get(s.dataId).id,c=a.dataIdMap.get(i.dataId).id,l=new Uint8Array(new Int32Array(o).buffer),p=new Uint8Array(new Int32Array(s.shape).buffer);Aa(d,l,o.length,p,s.shape.length,c);const m=Pn({inputs:{x:i},attrs:{shape:s.shape},backend:a});return a.disposeData(i.dataId),m},setupFunc:function(e){Aa=e.wasm.cwrap(ve,null,["number","array","number","array","number","number"])}};let Na;const Fa={kernelName:Se,backendName:"wasm",kernelFunc:function(e){const{inputs:n,backend:t,attrs:a}=e,{image:s}=n,{radians:u,fillValue:o,center:i}=a,d=t.makeOutput(s.shape,s.dtype),c=t.dataIdMap.get(s.dataId).id,l=t.dataIdMap.get(d.dataId).id,[p,m,f,h]=s.shape,[b,y]=r.getImageCenter(i,m,f),g="number"==typeof o?[o,o,o,0===o?0:255]:[...o,255],_=new Uint8Array(new Int32Array(g).buffer);return Na(c,p,m,f,h,u,b,y,_,g.length,l),d},setupFunc:function(e){Na=e.wasm.cwrap(Se,null,["number","number","number","number","number","number","number","number","array","number","number"])}},Oa=bn(Me),Ta=bn(Ee);let Ra;const Da={kernelName:Ae,backendName:"wasm",setupFunc:function(e){Ra=e.wasm.cwrap(Ae,null,["number","number","number","number","number","number","array","number","number"])},kernelFunc:function(e){const{backend:n,inputs:a,attrs:r}=e,{indices:s,updates:u}=a,{shape:o}=r,i=n.makeOutput(o,u.dtype);if(0===t.sizeFromShape(o))return i;const{sliceRank:d,numUpdates:c,sliceSize:l,strides:p,outputSize:m}=xe.calculateShapes(u,s,o),f=n.dataIdMap.get(s.dataId).id,h=n.dataIdMap.get(u.dataId).id,b=new Uint8Array(new Int32Array(p).buffer),y=n.dataIdMap.get(i.dataId).id;return Ra(f,h,pn[u.dtype],d,c,l,b,m,y),i}};let Ca;const Pa={kernelName:Ne,backendName:"wasm",kernelFunc:function(e){const{inputs:n,backend:a}=e,{condition:r,t:s,e:u}=n,o=a.dataIdMap.get(r.dataId).id,i=a.dataIdMap.get(s.dataId).id,d=a.dataIdMap.get(u.dataId).id,c=a.makeOutput(s.shape,s.dtype),l=a.dataIdMap.get(c.dataId).id,p=r.shape.length,m=s.shape.length,f=0===p||p>1||1===m?1:t.sizeFromShape(s.shape.slice(1));return Ca(o,i,d,f,l),c},setupFunc:function(e){Ca=e.wasm.cwrap("SelectV2",null,["number","number","number","number","number"])}};let Wa;const La={kernelName:"Sigmoid",backendName:"wasm",setupFunc:function(e){Wa=e.wasm.cwrap(Fe,null,["number","number"])},kernelFunc:function(e){const{backend:n,inputs:{x:a}}=e,r=n.dataIdMap.get(a.dataId).id,s=n.makeOutput(a.shape,a.dtype),u=n.dataIdMap.get(s.dataId).id;return 0===t.sizeFromShape(s.shape)||Wa(r,u),s}},Ha=bn(Oe);let Ua;const za={kernelName:Te,backendName:"wasm",setupFunc:function(e){Ua=e.wasm.cwrap(Te,null,["number","number","number","number"])},kernelFunc:function(e){const{backend:n,inputs:{logits:a},attrs:{dim:r}}=e,s=n.dataIdMap.get(a.dataId).id,u=n.makeOutput(a.shape,a.dtype),o=n.dataIdMap.get(u.dataId).id,i=a.shape[r],d=t.sizeFromShape(a.shape)/i;return 0===t.sizeFromShape(u.shape)||Ua(s,o,i,d),u}};const Ba={kernelName:Re,backendName:"wasm",kernelFunc:function(e){const{inputs:n,backend:a,attrs:s}=e,{x:u}=n,{blockShape:o,paddings:i}=s,d=t.sizeFromShape(o),c=[[0,0]];c.push(...i);for(let e=1+o.length;e<u.shape.length;++e)c.push([0,0]);const l=ha.kernelFunc({inputs:{x:u},backend:a,attrs:{paddings:c,constantValue:0}}),p=r.getReshaped(l.shape,o,d,!1),m=r.getPermuted(p.length,o.length,!1),f=r.getReshapedPermuted(l.shape,o,d,!1),h=Pn({inputs:{x:l},backend:a,attrs:{shape:p}}),b=Mn({inputs:{x:h},backend:a,attrs:{perm:m}}),y=Pn({inputs:{x:b},backend:a,attrs:{shape:f}});return a.disposeData(l.dataId),a.disposeData(h.dataId),a.disposeData(b.dataId),y}};let ja;const Ga={kernelName:De,backendName:"wasm",setupFunc:function(e){ja=e.wasm.cwrap("SparseFillEmptyRows","number",["number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){const{backend:n,inputs:t}=e,{indices:a,values:s,denseShape:u,defaultValue:o}=t,i=a.shape[0],d=a.shape[1],c=n.readSync(u.dataId)[0],l=[i+c,d],p=n.dataIdMap.get(a.dataId).id,m=n.dataIdMap.get(s.dataId).id,f=n.dataIdMap.get(o.dataId).id,h=n.makeOutput(l,a.dtype),b=n.dataIdMap.get(h.dataId).id,y=n.makeOutput(l.slice(0,1),s.dtype),g=n.dataIdMap.get(y.dataId).id,_=n.makeOutput([c],"bool"),w=n.dataIdMap.get(_.dataId).id,I=n.makeOutput([i],a.dtype),k=n.dataIdMap.get(I.dataId).id,v=n.makeOutput([4],"int32"),S=n.dataIdMap.get(v.dataId).id,M=ja(p,m,pn[s.dtype],i,c,d,f,b,g,w,k,S),E=n.readSync(v.dataId);let A;switch(E[0]){case 1:A=r.getSparseFillEmptyRowsIndicesDenseShapeMismatch(E[1]);break;case 2:A=r.getSparseFillEmptyRowsNegativeIndexErrorMessage(E[1],E[2]);break;case 3:A=r.getSparseFillEmptyRowsOutOfRangeIndexErrorMessage(E[1],E[2],E[3]);break;default:A=""}if(n.disposeData(v.dataId),A)throw n.disposeData(h.dataId),n.disposeData(y.dataId),n.disposeData(_.dataId),n.disposeData(I.dataId),new Error(A);let x=h,N=y;return M!==l[0]&&(x=zn({inputs:{x:h},attrs:{begin:0,size:[M,d]},backend:n}),N=zn({inputs:{x:y},attrs:{begin:0,size:M},backend:n}),n.disposeData(h.dataId),n.disposeData(y.dataId)),[x,N,_,I]}};let Va;const qa={kernelName:Ce,backendName:"wasm",setupFunc:function(e){Va=e.wasm.cwrap(Ce,null,["number","number","number","number","number","number","number"])},kernelFunc:function(e){const{backend:n,inputs:a}=e,{inputIndices:s,inputShape:u,newShape:o}=a;if(2!==s.shape.length)throw new Error(`Input indices should be a matrix but received shape\n        ${s.shape}`);if(1!==u.shape.length)throw new Error(`Input shape should be a vector but received shape\n        ${u.shape}`);if(1!==o.shape.length)throw new Error(`Target shape should be a vector but received shape ${o.shape}`);const i=n.dataIdMap.get(s.dataId).id,d=n.dataIdMap.get(u.dataId).id,c=n.dataIdMap.get(o.dataId).id,l=s.shape[0],p=t.sizeFromShape(o.shape),m=n.makeOutput([l,p],s.dtype),f=n.dataIdMap.get(m.dataId).id,h=n.makeOutput([p],o.dtype),b=n.dataIdMap.get(h.dataId).id,y=n.makeOutput([3],"int32"),g=n.dataIdMap.get(y.dataId).id;Va(i,d,c,l,f,b,g);const _=n.readSync(y.dataId);let w;switch(_[0]){case 0:w=r.getSparseReshapeMultipleNegativeOneOutputDimErrorMessage(_[1],_[2]);break;case 1:w=r.getSparseReshapeNegativeOutputDimErrorMessage(_[1],_[2]);break;case 2:w=r.getSparseReshapeEmptyTensorZeroOutputDimErrorMessage();break;case 3:{const e=Array.from(n.readSync(u.dataId)),t=Array.from(n.readSync(h.dataId));w=r.getSparseReshapeInputOutputMultipleErrorMessage(e,t);break}case 4:{const e=Array.from(n.readSync(u.dataId)),t=Array.from(n.readSync(h.dataId));w=r.getSparseReshapeInputOutputMismatchErrorMessage(e,t);break}default:w=""}if(n.disposeData(y.dataId),w)throw n.disposeData(m.dataId),n.disposeData(h.dataId),new Error(w);return[m,h]}};let $a;function Ka(e){$a=e.wasm.cwrap("SparseSegmentReduction",null,["number","number","number","number","number","number","number","number","number"])}function Xa(e,n){const{backend:t,inputs:a}=e,{data:s,indices:u,segmentIds:o}=a,i=u.shape[0],d=t.readSync(o.dataId,i-1,i)[0],c=i>0?d+1:0;if(c<0)throw new Error(r.getSparseSegmentReductionNegativeSegmentIdsErrorMessage());const l=s.shape.slice();l[0]=c;const p=t.dataIdMap.get(s.dataId).id,m=t.dataIdMap.get(u.dataId).id,f=t.dataIdMap.get(o.dataId).id,h=t.makeOutput(l,s.dtype),b=t.dataIdMap.get(h.dataId).id,y=t.makeOutput([4],"int32"),g=t.dataIdMap.get(y.dataId).id;$a(p,pn[s.dtype],s.shape[0],m,f,b,g,n,0);const _=t.readSync(y.dataId);let w;switch(_[0]){case 0:w=r.getSparseSegmentReductionNegativeSegmentIdsErrorMessage();break;case 1:w=r.getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage();break;case 2:w=r.getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage(_[1],_[2]);break;case 3:w=r.getSparseSegmentReductionIndicesOutOfRangeErrorMessage(_[1],_[2],_[3]);break;default:w=""}if(t.disposeData(y.dataId),w)throw t.disposeData(h.dataId),new Error(w);return h}const Qa={kernelName:Pe,backendName:"wasm",setupFunc:Ka,kernelFunc:function(e){return Xa(e,!0)}};const Ya={kernelName:We,backendName:"wasm",setupFunc:Ka,kernelFunc:function(e){return Xa(e,!1)}};const Za={kernelName:Le,backendName:"wasm",kernelFunc:function(e){const{inputs:n,attrs:a,backend:s}=e,{x:u}=n,{numOrSizeSplits:o,axis:i}=a,d=t.parseAxisParam(i,u.shape)[0],c=r.prepareSplitSize(u,o,d),l=new Array(u.shape.length).fill(0),p=u.shape.slice();return c.map((e=>{const n=[...p];n[d]=e;const t=zn({inputs:{x:u},attrs:{begin:l,size:n},backend:s});return l[d]+=e,t}))}},Ja=bn(He),er=bn(Ue),nr=gn(ze);let tr;const ar={kernelName:Be,backendName:"wasm",setupFunc:function(e){tr=e.wasm.cwrap(Be,null,["number","number","number","number"])},kernelFunc:function(e){const{backend:n,inputs:t,attrs:a}=e,{alpha:r}=a,{x:s}=t,u=n.dataIdMap.get(s.dataId).id,o=n.makeOutput(s.shape,s.dtype),i=n.dataIdMap.get(o.dataId).id;return tr(u,r,pn[s.dtype],i),o}};let rr;const sr={kernelName:je,backendName:"wasm",setupFunc:function(e){rr=e.wasm.cwrap(je,null,["number","array","number","array","array","array","array","array","number","number"])},kernelFunc:function(e){const{backend:n,inputs:a,attrs:r}=e,{x:s}=a,{begin:u,end:o,strides:i,beginMask:d,endMask:c,ellipsisMask:l,newAxisMask:p,shrinkAxisMask:m}=r,{finalShapeSparse:f,finalShape:b,isIdentity:y,sliceDim0:g,isSimpleSlice:_,begin:w,end:I,strides:k}=h.sliceInfo(s.shape,u,o,i,d,c,l,p,m);let v;if(y)v=Pn({inputs:{x:s},backend:n,attrs:{shape:b}});else if(g||_){t.assert(s.shape.length>=1,(()=>`Input must have rank at least 1, got: ${s.shape.length}`));const e=h.computeOutShape(w,I,k),a=zn({inputs:{x:s},backend:n,attrs:{begin:w,size:e}});v=Pn({inputs:{x:a},backend:n,attrs:{shape:b}}),n.disposeData(a.dataId)}else{const e=n.makeOutput(f,"float32"),a=n.dataIdMap.get(s.dataId).id,r=new Uint8Array(new Int32Array(t.computeStrides(s.shape)).buffer),u=new Uint8Array(new Int32Array(w).buffer),o=new Uint8Array(new Int32Array(I).buffer),i=new Uint8Array(new Int32Array(k).buffer),d=new Uint8Array(new Int32Array(f).buffer),c=new Uint8Array(new Int32Array(t.computeStrides(f)).buffer),l=n.dataIdMap.get(e.dataId).id;rr(a,r,s.shape.length,u,o,i,d,c,f.length,l),v=Pn({inputs:{x:e},backend:n,attrs:{shape:b}}),n.disposeData(e.dataId)}return v}},ur=gn(Ge);let or;const ir={kernelName:Ve,backendName:"wasm",setupFunc:function(e){or=e.wasm.cwrap(Ve,null,["number","number","number","number"])},kernelFunc:function(e){const{backend:n,inputs:a,attrs:s}=e,{axis:u,keepDims:o}=s,{x:i}=a,d=n.dataIdMap.get(i.dataId).id;let c=d,l=i;const{transposed:p,axes:m,originalAxes:f,inputWasTransposed:h}=An(i,u,n);let b=m;if(h){const e=n.dataIdMap.get(p.dataId).id;e!==d&&(l=p,c=e,b=r.getInnerMostAxes(b.length,l.shape.length))}r.assertAxesAreInnerMostDims("sum",b,l.shape.length);const[y,g]=r.computeOutAndReduceShapes(l.shape,b),_=t.sizeFromShape(g),w=n.makeOutput(y,l.dtype);if(0!==t.sizeFromShape(l.shape)){const e=n.dataIdMap.get(w.dataId).id;or(c,_,pn[w.dtype],e)}if(h&&n.disposeData(p.dataId),o){const e=r.expandShapeToKeepDim(w.shape,f);w.shape=e}return w}},dr=bn(qe),cr=bn($e);let lr;let pr;let mr;const fr=[hn,yn,_n,In,Nn,On,Rn,Cn,Hn,jn,Vn,qn,Kn,Qn,Zn,et,nt,tt,st,ot,dt,lt,pt,mt,ft,bt,gt,wt,It,kt,St,Et,xt,Ft,Tt,Rt,Dt,vn,Pt,Wt,Lt,Ht,Ut,Bt,jt,Vt,$t,Xt,Qt,Jt,ea,na,ra,ua,ia,da,la,pa,ma,ha,ba,ga,wa,Ia,ka,va,Sa,Wn,Ea,xa,Fa,Oa,Ta,Da,Pa,La,Ha,Bn,za,Ba,Ga,qa,Qa,Ya,Za,Ja,er,nr,ar,sr,ur,ir,dr,cr,{kernelName:Ke,backendName:"wasm",setupFunc:function(e){lr=e.wasm.cwrap(Ke,null,["number","array","number","array","number","number"])},kernelFunc:function(e){const{inputs:n,backend:t,attrs:a}=e,{x:r}=n,s=t.dataIdMap.get(r.dataId).id,{reps:u}=a,o=new Array(r.shape.length);for(let e=0;e<o.length;e++)o[e]=r.shape[e]*u[e];const i=new Uint8Array(new Int32Array(r.shape).buffer),d=new Uint8Array(new Int32Array(o).buffer),c=t.makeOutput(o,r.dtype),l=t.dataIdMap.get(c.dataId).id;return lr(s,i,r.shape.length,d,o.length,pn[c.dtype],l),c}},{kernelName:Xe,backendName:"wasm",setupFunc:function(e){pr=e.wasm.cwrap(Xe,null,["number","array","number","number","number","bool","number","number"])},kernelFunc:({inputs:e,backend:n,attrs:t})=>{const{x:a}=e,{k:r,sorted:s}=t,u=n.dataIdMap.get(a.dataId).id,o=new Uint8Array(new Int32Array(a.shape).buffer),i=a.shape.slice();i[i.length-1]=r;const d=n.makeOutput(i,a.dtype),c=n.dataIdMap.get(d.dataId).id,l=n.makeOutput(i,"int32"),p=n.dataIdMap.get(l.dataId).id;return pr(u,o,a.shape.length,pn[a.dtype],r,s,c,p),[d,l]}},{kernelName:Qe,backendName:"wasm",setupFunc:function(e){mr=e.wasm.cwrap(Qe,null,["number","number","bool","number","number","number","number","number","number","array","number","number","number","number","number"])},kernelFunc:function(e){const{backend:n,inputs:a,attrs:r}=e,{image:s,transforms:u}=a,{interpolation:o,fillMode:i,fillValue:d,outputShape:c}=r,[l,p,m,f]=s.shape,[h,b]=null!=c?c:[p,m],y=[l,h,b,f],g=new Uint8Array(new Int32Array(t.computeStrides(s.shape)).buffer),_=n.makeOutput(y,s.dtype),w=n.dataIdMap.get(_.dataId).id,I=n.dataIdMap.get(s.dataId).id,k=n.dataIdMap.get(u.dataId).id,v="nearest"===o?1:2;let S;switch(i){case"constant":S=1;break;case"reflect":S=2;break;case"wrap":S=3;break;case"nearest":S=4;break;default:S=1}return mr(I,k,u.shape[0]>1,l,h,b,f,m,p,g,s.shape.length-1,v,S,d,w),_}},En,{kernelName:Ye,backendName:"wasm",kernelFunc:function(e){const{inputs:n,backend:t,attrs:a}=e,{value:r}=n;let{axis:s}=a;s<0&&(s+=r.shape.length);const u=r.shape[s],o=r.shape.length,i=new Array(o-1);let d=0;for(let e=0;e<o;e++)e!==s&&(i[d++]=r.shape[e]);const c=new Array(u),l=new Array(o).fill(0),p=r.shape.slice();p[s]=1;for(let e=0;e<c.length;e++)l[s]=e,c[e]=zn({inputs:{x:r},attrs:{begin:l,size:p},backend:t});return c.map((({dataId:e,dtype:n})=>({dataId:e,dtype:n,shape:i})))}},{kernelName:Ze,backendName:"wasm",kernelFunc:function(e){const{inputs:{x:n},backend:t}=e,a=t.makeOutput(n.shape,n.dtype);return t.typedArrayFromHeap(a).fill(0),a}}];for(const e of fr)Je(e);const hr=en();hr.registerFlag("WASM_HAS_SIMD_SUPPORT",(async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11])))),hr.registerFlag("WASM_HAS_MULTITHREAD_SUPPORT",(async()=>{if(hr.get("IS_NODE"))return!1;try{return(new MessageChannel).port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]))}catch(e){return!1}}));var br="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function yr(e,n){return e(n={exports:{}},n.exports),n.exports}var gr=yr((function(e,n){var t,a=(t="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0,"undefined"!=typeof __filename&&(t=t||__filename),function(e){function n(){return O.buffer!=D&&Z(O.buffer),C}function a(){return O.buffer!=D&&Z(O.buffer),P}function r(){return O.buffer!=D&&Z(O.buffer),W}function s(){return O.buffer!=D&&Z(O.buffer),L}function u(){return O.buffer!=D&&Z(O.buffer),H}var o,i,d,c="undefined"!=typeof(e=e||{})?e:{};c.ready=new Promise((function(e,n){o=e,i=n})),"undefined"!=typeof process&&process.listeners&&(d={uncaughtException:process.listeners("uncaughtException"),unhandledRejection:process.listeners("unhandledRejection")});var l,p={};for(l in c)c.hasOwnProperty(l)&&(p[l]=c[l]);var m=function(e,n){throw n},f=!1,h=!1,b=!1,y=!1;f="object"==typeof window,h="function"==typeof importScripts,b="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,y=!f&&!b&&!h;var g=c.ENVIRONMENT_IS_PTHREAD||!1;g&&(D=c.buffer);var _,w,I,k,v,S="";function M(e){return c.locateFile?c.locateFile(e,S):S+e}if(b){var E;S=h?un.dirname(S)+"/":__dirname+"/",_=function(e,n){return k||(k=on),v||(v=un),e=v.normalize(e),k.readFileSync(e,n?null:"utf8")},I=function(e){var n=_(e,!0);return n.buffer||(n=new Uint8Array(n)),z(n.buffer),n},process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),process.on("uncaughtException",(function(e){if(!(e instanceof yt))throw e})),process.on("unhandledRejection",he),m=function(e){process.exit(e)},c.inspect=function(){return"[Emscripten Module object]"};try{E=dn}catch(e){throw console.error('The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?'),e}br.Worker=E.Worker}else y?("undefined"!=typeof read&&(_=function(e){return read(e)}),I=function(e){var n;return"function"==typeof readbuffer?new Uint8Array(readbuffer(e)):(z("object"==typeof(n=read(e,"binary"))),n)},"undefined"!=typeof scriptArgs&&scriptArgs,"function"==typeof quit&&(m=function(e){quit(e)}),"undefined"!=typeof print&&("undefined"==typeof console&&(console={}),console.log=print,console.warn=console.error="undefined"!=typeof printErr?printErr:print)):(f||h)&&(h?S=self.location.href:"undefined"!=typeof document&&document.currentScript&&(S=document.currentScript.src),"undefined"!=typeof t&&t&&(S=t),S=0!==S.indexOf("blob:")?S.substr(0,S.lastIndexOf("/")+1):"",b?(_=function(e,n){return k||(k=on),v||(v=un),e=v.normalize(e),k.readFileSync(e,n?null:"utf8")},I=function(e){var n=_(e,!0);return n.buffer||(n=new Uint8Array(n)),z(n.buffer),n}):(_=function(e){var n=new XMLHttpRequest;return n.open("GET",e,!1),n.send(null),n.responseText},h&&(I=function(e){var n=new XMLHttpRequest;return n.open("GET",e,!1),n.responseType="arraybuffer",n.send(null),new Uint8Array(n.response)}),w=function(e,n,t){var a=new XMLHttpRequest;a.open("GET",e,!0),a.responseType="arraybuffer",a.onload=function(){200==a.status||0==a.status&&a.response?n(a.response):t()},a.onerror=t,a.send(null)}));b&&"undefined"==typeof performance&&(br.performance=cn.performance);var A,x=c.print||console.log.bind(console),N=c.printErr||console.warn.bind(console);for(l in p)p.hasOwnProperty(l)&&(c[l]=p[l]);function F(e){F.shown||(F.shown={}),F.shown[e]||(F.shown[e]=1,N(e))}p=null,c.arguments&&c.arguments,c.thisProgram&&c.thisProgram,c.quit&&(m=c.quit),c.wasmBinary&&(A=c.wasmBinary);var O,T,R=c.noExitRuntime||!0;"object"!=typeof WebAssembly&&he("no native wasm support detected");var D,C,P,W,L,H,U=!1;function z(e,n){e||he("Assertion failed: "+n)}function B(e){var n=c["_"+e];return z(n,"Cannot call unknown function "+e+", make sure it is exported"),n}function j(e,n,t,a,r){var s={string:function(e){var n=0;if(null!=e&&0!==e){var t=1+(e.length<<2);K(e,n=pt(t),t)}return n},array:function(e){var n=pt(e.length);return Q(e,n),n}},u=B(e),o=[],i=0;if(a)for(var d=0;d<a.length;d++){var c=s[t[d]];c?(0===i&&(i=ct()),o[d]=c(a[d])):o[d]=a[d]}var l=u.apply(null,o);return l=function(e){return"string"===n?q(e):"boolean"===n?Boolean(e):e}(l),0!==i&&lt(i),l}function G(e,n,t,a){var r=(t=t||[]).every((function(e){return"number"===e}));return"string"!==n&&r&&!a?B(e):function(){return j(e,n,t,arguments)}}function V(e,n,t){for(var a=n+t,r="";!(n>=a);){var s=e[n++];if(!s)return r;if(128&s){var u=63&e[n++];if(192!=(224&s)){var o=63&e[n++];if((s=224==(240&s)?(15&s)<<12|u<<6|o:(7&s)<<18|u<<12|o<<6|63&e[n++])<65536)r+=String.fromCharCode(s);else{var i=s-65536;r+=String.fromCharCode(55296|i>>10,56320|1023&i)}}else r+=String.fromCharCode((31&s)<<6|u)}else r+=String.fromCharCode(s)}return r}function q(e,n){return e?V(a(),e,n):""}function $(e,n,t,a){if(!(a>0))return 0;for(var r=t,s=t+a-1,u=0;u<e.length;++u){var o=e.charCodeAt(u);if(o>=55296&&o<=57343&&(o=65536+((1023&o)<<10)|1023&e.charCodeAt(++u)),o<=127){if(t>=s)break;n[t++]=o}else if(o<=2047){if(t+1>=s)break;n[t++]=192|o>>6,n[t++]=128|63&o}else if(o<=65535){if(t+2>=s)break;n[t++]=224|o>>12,n[t++]=128|o>>6&63,n[t++]=128|63&o}else{if(t+3>=s)break;n[t++]=240|o>>18,n[t++]=128|o>>12&63,n[t++]=128|o>>6&63,n[t++]=128|63&o}}return n[t]=0,t-r}function K(e,n,t){return $(e,a(),n,t)}function X(e){for(var n=0,t=0;t<e.length;++t){var a=e.charCodeAt(t);a>=55296&&a<=57343&&(a=65536+((1023&a)<<10)|1023&e.charCodeAt(++t)),a<=127?++n:n+=a<=2047?2:a<=65535?3:4}return n}function Q(e,t){n().set(e,t)}function Y(e,n){return e%n>0&&(e+=n-e%n),e}function Z(e){D=e,c.HEAP8=C=new Int8Array(e),c.HEAP16=new Int16Array(e),c.HEAP32=W=new Int32Array(e),c.HEAPU8=P=new Uint8Array(e),c.HEAPU16=new Uint16Array(e),c.HEAPU32=L=new Uint32Array(e),c.HEAPF32=new Float32Array(e),c.HEAPF64=H=new Float64Array(e)}var J,ee=c.INITIAL_MEMORY||16777216;if(g)O=c.wasmMemory,D=c.buffer;else if(c.wasmMemory)O=c.wasmMemory;else if(!((O=new WebAssembly.Memory({initial:ee/65536,maximum:32768,shared:!0})).buffer instanceof SharedArrayBuffer))throw N("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),b&&console.log("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and also use a recent version)"),Error("bad memory");O&&(D=O.buffer),ee=D.byteLength,Z(D);var ne=[],te=[],ae=[],re=[];function se(){if(!g){if(c.preRun)for("function"==typeof c.preRun&&(c.preRun=[c.preRun]);c.preRun.length;)de(c.preRun.shift());Ae(ne)}}function ue(){g||Ae(te)}function oe(){g||Ae(ae)}function ie(){if(!g){if(c.postRun)for("function"==typeof c.postRun&&(c.postRun=[c.postRun]);c.postRun.length;)ce(c.postRun.shift());Ae(re)}}function de(e){ne.unshift(e)}function ce(e){re.unshift(e)}g||te.push({func:function(){Xn()}});var le=0,pe=null;function me(e){z(!g,"addRunDependency cannot be used in a pthread worker"),le++,c.monitorRunDependencies&&c.monitorRunDependencies(le)}function fe(e){if(le--,c.monitorRunDependencies&&c.monitorRunDependencies(le),0==le&&pe){var n=pe;pe=null,n()}}function he(e){c.onAbort&&c.onAbort(e),g&&console.error("Pthread aborting at "+(new Error).stack),N(e+=""),U=!0,e="abort("+e+"). Build with -s ASSERTIONS=1 for more info.";var n=new WebAssembly.RuntimeError(e);throw i(n),n}function be(e,n){return String.prototype.startsWith?e.startsWith(n):0===e.indexOf(n)}c.preloadedImages={},c.preloadedAudios={};var ye="data:application/octet-stream;base64,";function ge(e){return be(e,ye)}var _e="file://";function we(e){return be(e,_e)}var Ie="tfjs-backend-wasm-threaded-simd.wasm";function ke(e){try{if(e==Ie&&A)return new Uint8Array(A);if(I)return I(e);throw"both async and sync fetching of the wasm failed"}catch(e){he(e)}}function ve(){if(!A&&(f||h)){if("function"==typeof fetch&&!we(Ie))return fetch(Ie,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at '"+Ie+"'";return e.arrayBuffer()})).catch((function(){return ke(Ie)}));if(w)return new Promise((function(e,n){w(Ie,(function(n){e(new Uint8Array(n))}),n)}))}return Promise.resolve().then((function(){return ke(Ie)}))}function Se(){var e={a:Kn};function n(e,n){var t=e.exports;if(c.asm=t,J=c.asm.I,T=n,!g){var a=De.unusedWorkers.length;De.unusedWorkers.forEach((function(e){De.loadWasmModuleToWorker(e,(function(){--a||fe()}))}))}}function t(e){n(e.instance,e.module)}function a(n){return ve().then((function(n){return WebAssembly.instantiate(n,e)})).then(n,(function(e){N("failed to asynchronously prepare wasm: "+e),he(e)}))}if(g||me(),c.instantiateWasm)try{return c.instantiateWasm(e,n)}catch(e){return N("Module.instantiateWasm callback failed with error: "+e),!1}return(A||"function"!=typeof WebAssembly.instantiateStreaming||ge(Ie)||we(Ie)||"function"!=typeof fetch?a(t):fetch(Ie,{credentials:"same-origin"}).then((function(n){return WebAssembly.instantiateStreaming(n,e).then(t,(function(e){return N("wasm streaming compile failed: "+e),N("falling back to ArrayBuffer instantiation"),a(t)}))}))).catch(i),{}}ge(Ie)||(Ie=M(Ie));var Me={10664:function(){throw"Canceled!"},10682:function(e,n){setTimeout((function(){st(e,n)}),0)}};function Ee(){De.initRuntime()}function Ae(e){for(;e.length>0;){var n=e.shift();if("function"!=typeof n){var t=n.func;"number"==typeof t?void 0===n.arg?J.get(t)():J.get(t)(n.arg):t(void 0===n.arg?null:n.arg)}else n(c)}}var xe={EPERM:63,ENOENT:44,ESRCH:71,EINTR:27,EIO:29,ENXIO:60,E2BIG:1,ENOEXEC:45,EBADF:8,ECHILD:12,EAGAIN:6,EWOULDBLOCK:6,ENOMEM:48,EACCES:2,EFAULT:21,ENOTBLK:105,EBUSY:10,EEXIST:20,EXDEV:75,ENODEV:43,ENOTDIR:54,EISDIR:31,EINVAL:28,ENFILE:41,EMFILE:33,ENOTTY:59,ETXTBSY:74,EFBIG:22,ENOSPC:51,ESPIPE:70,EROFS:69,EMLINK:34,EPIPE:64,EDOM:18,ERANGE:68,ENOMSG:49,EIDRM:24,ECHRNG:106,EL2NSYNC:156,EL3HLT:107,EL3RST:108,ELNRNG:109,EUNATCH:110,ENOCSI:111,EL2HLT:112,EDEADLK:16,ENOLCK:46,EBADE:113,EBADR:114,EXFULL:115,ENOANO:104,EBADRQC:103,EBADSLT:102,EDEADLOCK:16,EBFONT:101,ENOSTR:100,ENODATA:116,ETIME:117,ENOSR:118,ENONET:119,ENOPKG:120,EREMOTE:121,ENOLINK:47,EADV:122,ESRMNT:123,ECOMM:124,EPROTO:65,EMULTIHOP:36,EDOTDOT:125,EBADMSG:9,ENOTUNIQ:126,EBADFD:127,EREMCHG:128,ELIBACC:129,ELIBBAD:130,ELIBSCN:131,ELIBMAX:132,ELIBEXEC:133,ENOSYS:52,ENOTEMPTY:55,ENAMETOOLONG:37,ELOOP:32,EOPNOTSUPP:138,EPFNOSUPPORT:139,ECONNRESET:15,ENOBUFS:42,EAFNOSUPPORT:5,EPROTOTYPE:67,ENOTSOCK:57,ENOPROTOOPT:50,ESHUTDOWN:140,ECONNREFUSED:14,EADDRINUSE:3,ECONNABORTED:13,ENETUNREACH:40,ENETDOWN:38,ETIMEDOUT:73,EHOSTDOWN:142,EHOSTUNREACH:23,EINPROGRESS:26,EALREADY:7,EDESTADDRREQ:17,EMSGSIZE:35,EPROTONOSUPPORT:66,ESOCKTNOSUPPORT:137,EADDRNOTAVAIL:4,ENETRESET:39,EISCONN:30,ENOTCONN:53,ETOOMANYREFS:141,EUSERS:136,EDQUOT:19,ESTALE:72,ENOTSUP:138,ENOMEDIUM:148,EILSEQ:25,EOVERFLOW:61,ECANCELED:11,ENOTRECOVERABLE:56,EOWNERDEAD:62,ESTRPIPE:135};function Ne(e,t){if(e<=0||e>n().length||!0&e||t<0)return-28;if(0==t)return 0;t>=2147483647&&(t=1/0);var a=Atomics.load(r(),bt>>2),s=0;if(a==e&&Atomics.compareExchange(r(),bt>>2,a,0)==a&&(s=1,--t<=0))return 1;var u=Atomics.notify(r(),e>>2,t);if(u>=0)return u+s;throw"Atomics.notify returned an unexpected value "+u}function Fe(e){if(g)throw"Internal Error! killThread() can only ever be called from main application thread!";if(!e)throw"Internal Error! Null pthread_ptr in killThread!";r()[e+12>>2]=0;var n=De.pthreads[e];n.worker.terminate(),De.freeThreadData(n),De.runningWorkers.splice(De.runningWorkers.indexOf(n.worker),1),n.worker.pthread=void 0}function Oe(e){if(g)throw"Internal Error! cancelThread() can only ever be called from main application thread!";if(!e)throw"Internal Error! Null pthread_ptr in cancelThread!";De.pthreads[e].worker.postMessage({cmd:"cancel"})}function Te(e){if(g)throw"Internal Error! cleanupThread() can only ever be called from main application thread!";if(!e)throw"Internal Error! Null pthread_ptr in cleanupThread!";var n=De.pthreads[e];if(n){r()[e+12>>2]=0;var t=n.worker;De.returnWorkerToPool(t)}}c._emscripten_futex_wake=Ne;var Re,De={unusedWorkers:[],runningWorkers:[],initMainThreadBlock:function(){for(var e=0;e<8;++e)De.allocateUnusedWorker()},initRuntime:function(){for(var e=Qn(228),n=0;n<57;++n)s()[e/4+n]=0;r()[e+12>>2]=e;var t=e+152;r()[t>>2]=t;var a=Qn(512);for(n=0;n<128;++n)s()[a/4+n]=0;Atomics.store(s(),e+100>>2,a),Atomics.store(s(),e+40>>2,e),dt(e,!h,1),at(e)},initWorker:function(){},pthreads:{},threadExitHandlers:[],setThreadStatus:function(){},runExitHandlers:function(){for(;De.threadExitHandlers.length>0;)De.threadExitHandlers.pop()();g&&et()&&nt()},runExitHandlersAndDeinitThread:function(e,n){Atomics.store(s(),e+56>>2,1),Atomics.store(s(),e+60>>2,0),De.runExitHandlers(),Atomics.store(s(),e+4>>2,n),Atomics.store(s(),e+0>>2,1),Ne(e+0,2147483647),dt(0,0,0)},threadExit:function(e){var n=et();n&&(De.runExitHandlersAndDeinitThread(n,e),g&&postMessage({cmd:"exit"}))},threadCancel:function(){De.runExitHandlersAndDeinitThread(et(),-1),postMessage({cmd:"cancelDone"})},terminateAllThreads:function(){for(var e in De.pthreads)(a=De.pthreads[e])&&a.worker&&De.returnWorkerToPool(a.worker);De.pthreads={};for(var n=0;n<De.unusedWorkers.length;++n)(t=De.unusedWorkers[n]).terminate();for(De.unusedWorkers=[],n=0;n<De.runningWorkers.length;++n){var t,a=(t=De.runningWorkers[n]).pthread;De.freeThreadData(a),t.terminate()}De.runningWorkers=[]},freeThreadData:function(e){if(e){if(e.threadInfoStruct){var n=r()[e.threadInfoStruct+100>>2];r()[e.threadInfoStruct+100>>2]=0,Yn(n),Yn(e.threadInfoStruct)}e.threadInfoStruct=0,e.allocatedOwnStack&&e.stackBase&&Yn(e.stackBase),e.stackBase=0,e.worker&&(e.worker.pthread=null)}},returnWorkerToPool:function(e){De.runWithoutMainThreadQueuedCalls((function(){delete De.pthreads[e.pthread.threadInfoStruct],De.unusedWorkers.push(e),De.runningWorkers.splice(De.runningWorkers.indexOf(e),1),De.freeThreadData(e.pthread),e.pthread=void 0}))},runWithoutMainThreadQueuedCalls:function(e){r()[ht>>2]=0;try{e()}finally{r()[ht>>2]=1}},receiveObjectTransfer:function(e){},loadWasmModuleToWorker:function(e,n){e.onmessage=function(t){var a=t.data,r=a.cmd;if(e.pthread&&(De.currentProxiedOperationCallerThread=e.pthread.threadInfoStruct),a.targetThread&&a.targetThread!=et()){var u=De.pthreads[a.targetThread];return u?u.worker.postMessage(t.data,a.transferList):console.error('Internal error! Worker sent a message "'+r+'" to target pthread '+a.targetThread+", but that thread no longer exists!"),void(De.currentProxiedOperationCallerThread=void 0)}if("processQueuedMainThreadWork"===r)tt();else if("spawnThread"===r)Wn(t.data);else if("cleanupThread"===r)Te(a.thread);else if("killThread"===r)Fe(a.thread);else if("cancelThread"===r)Oe(a.thread);else if("loaded"===r)e.loaded=!0,n&&n(e),e.runPthread&&(e.runPthread(),delete e.runPthread);else if("print"===r)x("Thread "+a.threadId+": "+a.text);else if("printErr"===r)N("Thread "+a.threadId+": "+a.text);else if("alert"===r)alert("Thread "+a.threadId+": "+a.text);else if("exit"===r)e.pthread&&Atomics.load(s(),e.pthread.threadInfoStruct+64>>2)&&De.returnWorkerToPool(e);else if("exitProcess"===r)try{_t(a.returnCode)}catch(t){if(t instanceof yt)return;throw t}else"cancelDone"===r?De.returnWorkerToPool(e):"objectTransfer"===r?De.receiveObjectTransfer(t.data):"setimmediate"===t.data.target?e.postMessage(t.data):N("worker sent an unknown command "+r);De.currentProxiedOperationCallerThread=void 0},e.onerror=function(e){N("pthread sent an error! "+e.filename+":"+e.lineno+": "+e.message)},b&&(e.on("message",(function(n){e.onmessage({data:n})})),e.on("error",(function(n){e.onerror(n)})),e.on("exit",(function(e){}))),e.postMessage({cmd:"load",urlOrBlob:c.mainScriptUrlOrBlob||t,wasmMemory:O,wasmModule:T})},allocateUnusedWorker:function(){var e=M("tfjs-backend-wasm-threaded-simd.worker.js");De.unusedWorkers.push(new Worker(e))},getNewWorker:function(){return 0==De.unusedWorkers.length&&(De.allocateUnusedWorker(),De.loadWasmModuleToWorker(De.unusedWorkers[0])),De.unusedWorkers.length>0?De.unusedWorkers.pop():null},busySpinWait:function(e){for(var n=performance.now()+e;performance.now()<n;);}};function Ce(e,n){mt(e,n),lt(e)}function Pe(){return R}function We(e,n){return J.get(e)(n)}function Le(e,n,t,a){he("Assertion failed: "+q(e)+", at: "+[n?q(n):"unknown filename",t,a?q(a):"unknown function"])}function He(e,n){_main(e,n)}function Ue(e){return r()[Zn()>>2]=e,e}function ze(e,n){if(g)return Xe(1,1,e,n)}function Be(e,n){if(e==n)postMessage({cmd:"processQueuedMainThreadWork"});else if(g)postMessage({targetThread:e,cmd:"processThreadQueue"});else{var t=De.pthreads[e],a=t&&t.worker;if(!a)return;a.postMessage({cmd:"processThreadQueue"})}return 1}function je(){he()}function Ge(e,n,t){var a=Ze(n,t);return Me[e].apply(null,a)}function Ve(e,n){}function qe(e,t,a){if(e<=0||e>n().length||!0&e)return-28;if(f){if(Atomics.load(r(),e>>2)!=t)return-6;var s=performance.now(),u=s+a;for(Atomics.exchange(r(),bt>>2,e);;){if((s=performance.now())>u)return Atomics.exchange(r(),bt>>2,0),-73;if(0==Atomics.exchange(r(),bt>>2,0))break;if(tt(),Atomics.load(r(),e>>2)!=t)return-6;Atomics.exchange(r(),bt>>2,e)}return 0}var o=Atomics.wait(r(),e>>2,t,a);if("timed-out"===o)return-73;if("not-equal"===o)return-6;if("ok"===o)return 0;throw"Atomics.wait returned an unexpected value "+o}function $e(e,n,t){a().copyWithin(e,n,n+t)}function Ke(){return b?ln.cpus().length:navigator.hardwareConcurrency}function Xe(e,n){for(var t=arguments.length-2,a=ct(),r=t,s=pt(8*r),o=s>>3,i=0;i<t;i++){var d=arguments[2+i];u()[o+i]=d}var c=ot(e,r,s,n);return lt(a),c}c.establishStackSpace=Ce,c.getNoExitRuntime=Pe,c.invokeEntryPoint=We,Re=b?function(){var e=process.hrtime();return 1e3*e[0]+e[1]/1e6}:g?function(){return performance.now()-c.__performance_now_clock_drift}:"undefined"!=typeof dateNow?dateNow:function(){return performance.now()};var Qe=[],Ye=[];function Ze(e,n){var t;for(Ye.length=0,n>>=2;t=a()[e++];){var s=t<105;s&&1&n&&n++,Ye.push(s?u()[n++>>1]:r()[n]),++n}return Ye}function Je(e,n,t){Qe.length=n;for(var a=t>>3,r=0;r<n;r++)Qe[r]=u()[a+r];return(e<0?Me[-e-1]:$n[e]).apply(null,Qe)}function en(){return a().length}function nn(e){try{return O.grow(e-D.byteLength+65535>>>16),Z(O.buffer),1}catch(e){}}function tn(e){var n=en();if(e<=n)return!1;var t=2147483648;if(e>t)return!1;for(var a=1;a<=4;a*=2){var r=n*(1+.2/a);if(r=Math.min(r,e+100663296),nn(Math.min(t,Y(Math.max(e,r),65536))))return!0}return!1}var an={inEventHandler:0,removeAllEventListeners:function(){for(var e=an.eventHandlers.length-1;e>=0;--e)an._removeHandler(e);an.eventHandlers=[],an.deferredCalls=[]},registerRemoveEventListeners:function(){an.removeEventListenersRegistered||(an.removeEventListenersRegistered=!0)},deferredCalls:[],deferCall:function(e,n,t){function a(e,n){if(e.length!=n.length)return!1;for(var t in e)if(e[t]!=n[t])return!1;return!0}for(var r in an.deferredCalls){var s=an.deferredCalls[r];if(s.targetFunction==e&&a(s.argsList,t))return}an.deferredCalls.push({targetFunction:e,precedence:n,argsList:t}),an.deferredCalls.sort((function(e,n){return e.precedence<n.precedence}))},removeDeferredCalls:function(e){for(var n=0;n<an.deferredCalls.length;++n)an.deferredCalls[n].targetFunction==e&&(an.deferredCalls.splice(n,1),--n)},canPerformEventHandlerRequests:function(){return an.inEventHandler&&an.currentEventHandler.allowsDeferredCalls},runDeferredCalls:function(){if(an.canPerformEventHandlerRequests())for(var e=0;e<an.deferredCalls.length;++e){var n=an.deferredCalls[e];an.deferredCalls.splice(e,1),--e,n.targetFunction.apply(null,n.argsList)}},eventHandlers:[],removeAllHandlersOnTarget:function(e,n){for(var t=0;t<an.eventHandlers.length;++t)an.eventHandlers[t].target!=e||n&&n!=an.eventHandlers[t].eventTypeString||an._removeHandler(t--)},_removeHandler:function(e){var n=an.eventHandlers[e];n.target.removeEventListener(n.eventTypeString,n.eventListenerFunc,n.useCapture),an.eventHandlers.splice(e,1)},registerOrRemoveHandler:function(e){var n=function(n){++an.inEventHandler,an.currentEventHandler=e,an.runDeferredCalls(),e.handlerFunc(n),an.runDeferredCalls(),--an.inEventHandler};if(e.callbackfunc)e.eventListenerFunc=n,e.target.addEventListener(e.eventTypeString,n,e.useCapture),an.eventHandlers.push(e),an.registerRemoveEventListeners();else for(var t=0;t<an.eventHandlers.length;++t)an.eventHandlers[t].target==e.target&&an.eventHandlers[t].eventTypeString==e.eventTypeString&&an._removeHandler(t--)},queueEventHandlerOnThread_iiii:function(e,n,t,a,s){var u=ct(),o=pt(12);r()[o>>2]=t,r()[o+4>>2]=a,r()[o+8>>2]=s,it(0,e,637534208,n,a,o),lt(u)},getTargetThreadForEventCallback:function(e){switch(e){case 1:return 0;case 2:return De.currentProxiedOperationCallerThread;default:return e}},getNodeNameForTarget:function(e){return e?e==window?"#window":e==screen?"#screen":e&&e.nodeName?e.nodeName:"":""},fullscreenEnabled:function(){return document.fullscreenEnabled||document.webkitFullscreenEnabled}};function rn(e){var n=X(e)+1,t=Qn(n);return K(e,t,n),t}function sn(e,n,t,a){var s=ct(),u=pt(12),o=0;n&&(o=rn(n)),r()[u>>2]=o,r()[u+4>>2]=t,r()[u+8>>2]=a,it(0,e,657457152,0,o,u),lt(s)}function pn(e,n,t,a){sn(e,n=n?q(n):"",t,a)}function mn(e){return e>2?q(e):e}var fn=[0,"undefined"!=typeof document?document:0,"undefined"!=typeof window?window:0];function hn(e){return e=mn(e),fn[e]||("undefined"!=typeof document?document.querySelector(e):void 0)}function bn(e){return hn(e)}function yn(e,n,t){var a=bn(e);if(!a)return-4;if(a.canvasSharedPtr&&(r()[a.canvasSharedPtr>>2]=n,r()[a.canvasSharedPtr+4>>2]=t),!a.offscreenCanvas&&a.controlTransferredOffscreen)return a.canvasSharedPtr?(pn(r()[a.canvasSharedPtr+8>>2],e,n,t),1):-4;a.offscreenCanvas&&(a=a.offscreenCanvas);var s=!1;if(a.GLctxObject&&a.GLctxObject.GLctx){var u=a.GLctxObject.GLctx.getParameter(2978);s=0===u[0]&&0===u[1]&&u[2]===a.width&&u[3]===a.height}return a.width=n,a.height=t,s&&a.GLctxObject.GLctx.viewport(0,0,n,t),0}function gn(e,n,t){return g?Xe(2,1,e,n,t):yn(e,n,t)}function _n(e,n,t){return bn(e)?yn(e,n,t):gn(e,n,t)}function wn(e){}function In(e,n){}function kn(e){var n=e.getExtension("ANGLE_instanced_arrays");if(n)return e.vertexAttribDivisor=function(e,t){n.vertexAttribDivisorANGLE(e,t)},e.drawArraysInstanced=function(e,t,a,r){n.drawArraysInstancedANGLE(e,t,a,r)},e.drawElementsInstanced=function(e,t,a,r,s){n.drawElementsInstancedANGLE(e,t,a,r,s)},1}function vn(e){var n=e.getExtension("OES_vertex_array_object");if(n)return e.createVertexArray=function(){return n.createVertexArrayOES()},e.deleteVertexArray=function(e){n.deleteVertexArrayOES(e)},e.bindVertexArray=function(e){n.bindVertexArrayOES(e)},e.isVertexArray=function(e){return n.isVertexArrayOES(e)},1}function Sn(e){var n=e.getExtension("WEBGL_draw_buffers");if(n)return e.drawBuffers=function(e,t){n.drawBuffersWEBGL(e,t)},1}function Mn(e){return!!(e.multiDrawWebgl=e.getExtension("WEBGL_multi_draw"))}var En={counter:1,buffers:[],programs:[],framebuffers:[],renderbuffers:[],textures:[],uniforms:[],shaders:[],vaos:[],contexts:{},offscreenCanvases:{},timerQueriesEXT:[],programInfos:{},stringCache:{},unpackAlignment:4,recordError:function(e){En.lastError||(En.lastError=e)},getNewId:function(e){for(var n=En.counter++,t=e.length;t<n;t++)e[t]=null;return n},getSource:function(e,n,t,a){for(var s="",u=0;u<n;++u){var o=a?r()[a+4*u>>2]:-1;s+=q(r()[t+4*u>>2],o<0?void 0:o)}return s},createContext:function(e,n){var t=e.getContext("webgl",n);return t?En.registerContext(t,n):0},registerContext:function(e,n){var t=Qn(8);r()[t+4>>2]=et();var a={handle:t,attributes:n,version:n.majorVersion,GLctx:e};return e.canvas&&(e.canvas.GLctxObject=a),En.contexts[t]=a,("undefined"==typeof n.enableExtensionsByDefault||n.enableExtensionsByDefault)&&En.initExtensions(a),t},makeContextCurrent:function(e){return En.currentContext=En.contexts[e],c.ctx=Fn=En.currentContext&&En.currentContext.GLctx,!(e&&!Fn)},getContext:function(e){return En.contexts[e]},deleteContext:function(e){En.currentContext===En.contexts[e]&&(En.currentContext=null),"object"==typeof an&&an.removeAllHandlersOnTarget(En.contexts[e].GLctx.canvas),En.contexts[e]&&En.contexts[e].GLctx.canvas&&(En.contexts[e].GLctx.canvas.GLctxObject=void 0),Yn(En.contexts[e].handle),En.contexts[e]=null},initExtensions:function(e){if(e||(e=En.currentContext),!e.initExtensionsDone){e.initExtensionsDone=!0;var n=e.GLctx;kn(n),vn(n),Sn(n),n.disjointTimerQueryExt=n.getExtension("EXT_disjoint_timer_query"),Mn(n),(n.getSupportedExtensions()||[]).forEach((function(e){e.indexOf("lose_context")<0&&e.indexOf("debug")<0&&n.getExtension(e)}))}},populateUniformTable:function(e){for(var n=En.programs[e],t=En.programInfos[e]={uniforms:{},maxUniformLength:0,maxAttributeLength:-1,maxUniformBlockNameLength:-1},a=t.uniforms,r=Fn.getProgramParameter(n,35718),s=0;s<r;++s){var u=Fn.getActiveUniform(n,s),o=u.name;t.maxUniformLength=Math.max(t.maxUniformLength,o.length+1),"]"==o.slice(-1)&&(o=o.slice(0,o.lastIndexOf("[")));var i=Fn.getUniformLocation(n,o);if(i){var d=En.getNewId(En.uniforms);a[o]=[u.size,d],En.uniforms[d]=i;for(var c=1;c<u.size;++c){var l=o+"["+c+"]";i=Fn.getUniformLocation(n,l),d=En.getNewId(En.uniforms),En.uniforms[d]=i}}}}},An=["default","low-power","high-performance"];function xn(e,n){var t=n>>2,a=r()[t+6],s={alpha:!!r()[t+0],depth:!!r()[t+1],stencil:!!r()[t+2],antialias:!!r()[t+3],premultipliedAlpha:!!r()[t+4],preserveDrawingBuffer:!!r()[t+5],powerPreference:An[a],failIfMajorPerformanceCaveat:!!r()[t+7],majorVersion:r()[t+8],minorVersion:r()[t+9],enableExtensionsByDefault:r()[t+10],explicitSwapControl:r()[t+11],proxyContextToMainThread:r()[t+12],renderViaOffscreenBackBuffer:r()[t+13]},u=bn(e);return u?s.explicitSwapControl?0:En.createContext(u,s):0}function Nn(e,n){return xn(e,n)}var Fn,On={mappings:{},buffers:[null,[],[]],printChar:function(e,n){var t=On.buffers[e];0===n||10===n?((1===e?x:N)(V(t,0)),t.length=0):t.push(n)},varargs:void 0,get:function(){return On.varargs+=4,r()[On.varargs-4>>2]},getStr:function(e){return q(e)},get64:function(e,n){return e}};function Tn(e){return g?Xe(3,1,e):0}function Rn(e,n,t,a,r){if(g)return Xe(4,1,e,n,t,a,r)}function Dn(e,n,t,s){if(g)return Xe(5,1,e,n,t,s);for(var u=0,o=0;o<t;o++){for(var i=r()[n+8*o>>2],d=r()[n+(8*o+4)>>2],c=0;c<d;c++)On.printChar(e,a()[i+c]);u+=d}return r()[s>>2]=u,0}function Cn(e){var n=De.threadExitHandlers.pop();e&&n()}function Pn(e,n){De.threadExitHandlers.push((function(){J.get(e)(n)}))}function Wn(e){if(g)throw"Internal Error! spawnThread() can only ever be called from main application thread!";var n=De.getNewWorker();if(void 0!==n.pthread)throw"Internal error!";if(!e.pthread_ptr)throw"Internal error, no pthread ptr!";De.runningWorkers.push(n);for(var t=Qn(512),a=0;a<128;++a)r()[t+4*a>>2]=0;var u=e.stackBase+e.stackSize,o=De.pthreads[e.pthread_ptr]={worker:n,stackBase:e.stackBase,stackSize:e.stackSize,allocatedOwnStack:e.allocatedOwnStack,threadInfoStruct:e.pthread_ptr},i=o.threadInfoStruct>>2;Atomics.store(s(),i+16,e.detached),Atomics.store(s(),i+25,t),Atomics.store(s(),i+10,o.threadInfoStruct),Atomics.store(s(),i+20,e.stackSize),Atomics.store(s(),i+19,u),Atomics.store(s(),i+26,e.stackSize),Atomics.store(s(),i+28,u),Atomics.store(s(),i+29,e.detached);var d=Jn()+40;Atomics.store(s(),i+43,d),n.pthread=o;var c={cmd:"run",start_routine:e.startRoutine,arg:e.arg,threadInfoStruct:e.pthread_ptr,stackBase:e.stackBase,stackSize:e.stackSize};n.runPthread=function(){c.time=performance.now(),n.postMessage(c,e.transferList)},n.loaded&&(n.runPthread(),delete n.runPthread)}function Ln(e,n,t,a){if("undefined"==typeof SharedArrayBuffer)return N("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;if(!e)return N("pthread_create called with a null thread pointer!"),28;var u=[];if(g&&0===u.length)return ut(687865856,e,n,t,a);var o=0,i=0,d=0;n&&-1!=n?(o=r()[n>>2],o+=81920,i=r()[n+8>>2],d=0!==r()[n+12>>2]):o=2097152;var c=0==i;c?i=ft(16,o):z((i-=o)>0);for(var l=Qn(228),p=0;p<57;++p)s()[(l>>2)+p]=0;r()[e>>2]=l,r()[l+12>>2]=l;var m=l+152;r()[m>>2]=m;var f={stackBase:i,stackSize:o,allocatedOwnStack:c,detached:d,startRoutine:t,pthread_ptr:l,arg:a,transferList:u};return g?(f.cmd="spawnThread",postMessage(f,u)):Wn(f),0}function Hn(){if(g){var e=et();if(e&&!Atomics.load(s(),e+56>>2)&&2==Atomics.load(s(),e+0>>2))throw"Canceled!"}}function Un(){b||h||F("Blocking on the main thread is very dangerous, see https://emscripten.org/docs/porting/pthreads.html#blocking-on-the-main-browser-thread")}function zn(e,n,t){if(!e)return N("pthread_join attempted on a null thread pointer!"),xe.ESRCH;if(g&&et()==e)return N("PThread "+e+" is attempting to join to itself!"),xe.EDEADLK;if(!g&&rt()==e)return N("Main thread "+e+" is attempting to join to itself!"),xe.EDEADLK;if(r()[e+12>>2]!==e)return N("pthread_join attempted on thread "+e+", which does not point to a valid thread, or does not exist anymore!"),xe.ESRCH;if(Atomics.load(s(),e+64>>2))return N("Attempted to join thread "+e+", which was already detached!"),xe.EINVAL;for(t&&Un();;){var a=Atomics.load(s(),e+0>>2);if(1==a){var u=Atomics.load(s(),e+4>>2);return n&&(r()[n>>2]=u),Atomics.store(s(),e+64>>2,1),g?postMessage({cmd:"cleanupThread",thread:e}):Te(e),0}if(!t)return xe.EBUSY;Hn(),g||tt(),qe(e+0,a,g?100:1)}}function Bn(e,n){return zn(e,n,!0)}function jn(e){if(g)return Xe(6,1,e);switch(e){case 30:return 16384;case 85:return 131072;case 132:case 133:case 12:case 137:case 138:case 15:case 235:case 16:case 17:case 18:case 19:case 20:case 149:case 13:case 10:case 236:case 153:case 9:case 21:case 22:case 159:case 154:case 14:case 77:case 78:case 139:case 82:case 68:case 67:case 164:case 11:case 29:case 47:case 48:case 95:case 52:case 51:case 46:return 200809;case 27:case 246:case 127:case 128:case 23:case 24:case 160:case 161:case 181:case 182:case 242:case 183:case 184:case 243:case 244:case 245:case 165:case 178:case 179:case 49:case 50:case 168:case 169:case 175:case 170:case 171:case 172:case 97:case 76:case 32:case 173:case 35:case 80:case 81:case 79:return-1;case 176:case 177:case 7:case 155:case 8:case 157:case 125:case 126:case 92:case 93:case 129:case 130:case 131:case 94:case 91:return 1;case 74:case 60:case 69:case 70:case 4:return 1024;case 31:case 42:case 72:return 32;case 87:case 26:case 33:return 2147483647;case 34:case 1:return 47839;case 38:case 36:return 99;case 43:case 37:return 2048;case 0:return 2097152;case 3:return 65536;case 28:return 32768;case 44:return 32767;case 75:return 16384;case 39:return 1e3;case 89:return 700;case 71:return 256;case 40:return 255;case 2:return 100;case 180:return 64;case 25:return 20;case 5:return 16;case 6:return 6;case 73:return 4;case 84:return"object"==typeof navigator&&navigator.hardwareConcurrency||1}return Ue(28),-1}g||De.initMainThreadBlock();var Gn,Vn,qn,$n=[null,ze,gn,Tn,Rn,Dn,jn],Kn={e:Le,r:He,x:Be,b:je,y:Ge,j:Ve,d:qe,c:Ne,f:Re,p:$e,A:Ke,u:Je,q:tn,v:_n,i:wn,s:In,w:Nn,l:Tn,n:Rn,g:Dn,o:Ee,a:O||c.wasmMemory,z:Cn,k:Pn,h:Ln,m:Bn,t:jn},Xn=(Se(),c.___wasm_call_ctors=function(){return(Xn=c.___wasm_call_ctors=c.asm.B).apply(null,arguments)}),Qn=(c._init=function(){return(c._init=c.asm.C).apply(null,arguments)},c._init_with_threads_count=function(){return(c._init_with_threads_count=c.asm.D).apply(null,arguments)},c._get_threads_count=function(){return(c._get_threads_count=c.asm.E).apply(null,arguments)},c._register_tensor=function(){return(c._register_tensor=c.asm.F).apply(null,arguments)},c._dispose_data=function(){return(c._dispose_data=c.asm.G).apply(null,arguments)},c._dispose=function(){return(c._dispose=c.asm.H).apply(null,arguments)},c._Abs=function(){return(c._Abs=c.asm.J).apply(null,arguments)},c._Add=function(){return(c._Add=c.asm.K).apply(null,arguments)},c._AddN=function(){return(c._AddN=c.asm.L).apply(null,arguments)},c._All=function(){return(c._All=c.asm.M).apply(null,arguments)},c._Any=function(){return(c._Any=c.asm.N).apply(null,arguments)},c._ArgMax=function(){return(c._ArgMax=c.asm.O).apply(null,arguments)},c._AvgPool=function(){return(c._AvgPool=c.asm.P).apply(null,arguments)},c._BatchMatMul=function(){return(c._BatchMatMul=c.asm.Q).apply(null,arguments)},c._Ceil=function(){return(c._Ceil=c.asm.R).apply(null,arguments)},c._ClipByValue=function(){return(c._ClipByValue=c.asm.S).apply(null,arguments)},c._Conv2D=function(){return(c._Conv2D=c.asm.T).apply(null,arguments)},c._Conv2DBackpropInput=function(){return(c._Conv2DBackpropInput=c.asm.U).apply(null,arguments)},c._Cos=function(){return(c._Cos=c.asm.V).apply(null,arguments)},c._Cosh=function(){return(c._Cosh=c.asm.W).apply(null,arguments)},c._CropAndResize=function(){return(c._CropAndResize=c.asm.X).apply(null,arguments)},c._Cumsum=function(){return(c._Cumsum=c.asm.Y).apply(null,arguments)},c._DepthToSpace=function(){return(c._DepthToSpace=c.asm.Z).apply(null,arguments)},c._DepthwiseConv2dNative=function(){return(c._DepthwiseConv2dNative=c.asm._).apply(null,arguments)},c._Elu=function(){return(c._Elu=c.asm.$).apply(null,arguments)},c._Equal=function(){return(c._Equal=c.asm.aa).apply(null,arguments)},c._Exp=function(){return(c._Exp=c.asm.ba).apply(null,arguments)},c._FlipLeftRight=function(){return(c._FlipLeftRight=c.asm.ca).apply(null,arguments)},c._Floor=function(){return(c._Floor=c.asm.da).apply(null,arguments)},c._FloorDiv=function(){return(c._FloorDiv=c.asm.ea).apply(null,arguments)},c._FusedBatchNorm=function(){return(c._FusedBatchNorm=c.asm.fa).apply(null,arguments)},c._FusedConv2D=function(){return(c._FusedConv2D=c.asm.ga).apply(null,arguments)},c._FusedDepthwiseConv2D=function(){return(c._FusedDepthwiseConv2D=c.asm.ha).apply(null,arguments)},c._Gather=function(){return(c._Gather=c.asm.ia).apply(null,arguments)},c._GatherNd=function(){return(c._GatherNd=c.asm.ja).apply(null,arguments)},c._Greater=function(){return(c._Greater=c.asm.ka).apply(null,arguments)},c._GreaterEqual=function(){return(c._GreaterEqual=c.asm.la).apply(null,arguments)},c._LeakyRelu=function(){return(c._LeakyRelu=c.asm.ma).apply(null,arguments)},c._Less=function(){return(c._Less=c.asm.na).apply(null,arguments)},c._LessEqual=function(){return(c._LessEqual=c.asm.oa).apply(null,arguments)},c._Log=function(){return(c._Log=c.asm.pa).apply(null,arguments)},c._LogicalAnd=function(){return(c._LogicalAnd=c.asm.qa).apply(null,arguments)},c._Max=function(){return(c._Max=c.asm.ra).apply(null,arguments)},c._MaxPool=function(){return(c._MaxPool=c.asm.sa).apply(null,arguments)},c._Maximum=function(){return(c._Maximum=c.asm.ta).apply(null,arguments)},c._Mean=function(){return(c._Mean=c.asm.ua).apply(null,arguments)},c._Min=function(){return(c._Min=c.asm.va).apply(null,arguments)},c._Minimum=function(){return(c._Minimum=c.asm.wa).apply(null,arguments)},c._MirrorPad=function(){return(c._MirrorPad=c.asm.xa).apply(null,arguments)},c._Multiply=function(){return(c._Multiply=c.asm.ya).apply(null,arguments)},c._Neg=function(){return(c._Neg=c.asm.za).apply(null,arguments)},c._NonMaxSuppressionV3=function(){return(c._NonMaxSuppressionV3=c.asm.Aa).apply(null,arguments)},c._NonMaxSuppressionV4=function(){return(c._NonMaxSuppressionV4=c.asm.Ba).apply(null,arguments)},c._NonMaxSuppressionV5=function(){return(c._NonMaxSuppressionV5=c.asm.Ca).apply(null,arguments)},c._NotEqual=function(){return(c._NotEqual=c.asm.Da).apply(null,arguments)},c._OneHot=function(){return(c._OneHot=c.asm.Ea).apply(null,arguments)},c._PadV2=function(){return(c._PadV2=c.asm.Fa).apply(null,arguments)},c._Pow=function(){return(c._Pow=c.asm.Ga).apply(null,arguments)},c._Prelu=function(){return(c._Prelu=c.asm.Ha).apply(null,arguments)},c._Prod=function(){return(c._Prod=c.asm.Ia).apply(null,arguments)},c._RealDiv=function(){return(c._RealDiv=c.asm.Ja).apply(null,arguments)},c._Relu=function(){return(c._Relu=c.asm.Ka).apply(null,arguments)},c._Relu6=function(){return(c._Relu6=c.asm.La).apply(null,arguments)},c._ResizeBilinear=function(){return(c._ResizeBilinear=c.asm.Ma).apply(null,arguments)},c._Reverse=function(){return(c._Reverse=c.asm.Na).apply(null,arguments)},c._RotateWithOffset=function(){return(c._RotateWithOffset=c.asm.Oa).apply(null,arguments)},c._Round=function(){return(c._Round=c.asm.Pa).apply(null,arguments)},c._Rsqrt=function(){return(c._Rsqrt=c.asm.Qa).apply(null,arguments)},c._ScatterNd=function(){return(c._ScatterNd=c.asm.Ra).apply(null,arguments)},c._SelectV2=function(){return(c._SelectV2=c.asm.Sa).apply(null,arguments)},c._Sigmoid=function(){return(c._Sigmoid=c.asm.Ta).apply(null,arguments)},c._Sin=function(){return(c._Sin=c.asm.Ua).apply(null,arguments)},c._Softmax=function(){return(c._Softmax=c.asm.Va).apply(null,arguments)},c._SparseFillEmptyRows=function(){return(c._SparseFillEmptyRows=c.asm.Wa).apply(null,arguments)},c._SparseReshape=function(){return(c._SparseReshape=c.asm.Xa).apply(null,arguments)},c._SparseSegmentReduction=function(){return(c._SparseSegmentReduction=c.asm.Ya).apply(null,arguments)},c._Sqrt=function(){return(c._Sqrt=c.asm.Za).apply(null,arguments)},c._Square=function(){return(c._Square=c.asm._a).apply(null,arguments)},c._SquaredDifference=function(){return(c._SquaredDifference=c.asm.$a).apply(null,arguments)},c._Step=function(){return(c._Step=c.asm.ab).apply(null,arguments)},c._StridedSlice=function(){return(c._StridedSlice=c.asm.bb).apply(null,arguments)},c._Sub=function(){return(c._Sub=c.asm.cb).apply(null,arguments)},c._Sum=function(){return(c._Sum=c.asm.db).apply(null,arguments)},c._Tan=function(){return(c._Tan=c.asm.eb).apply(null,arguments)},c._Tanh=function(){return(c._Tanh=c.asm.fb).apply(null,arguments)},c._Tile=function(){return(c._Tile=c.asm.gb).apply(null,arguments)},c._TopK=function(){return(c._TopK=c.asm.hb).apply(null,arguments)},c._Transform=function(){return(c._Transform=c.asm.ib).apply(null,arguments)},c._Transpose=function(){return(c._Transpose=c.asm.jb).apply(null,arguments)},c.__FusedMatMul=function(){return(c.__FusedMatMul=c.asm.kb).apply(null,arguments)},c._malloc=function(){return(Qn=c._malloc=c.asm.lb).apply(null,arguments)}),Yn=c._free=function(){return(Yn=c._free=c.asm.mb).apply(null,arguments)},Zn=c.___errno_location=function(){return(Zn=c.___errno_location=c.asm.nb).apply(null,arguments)},Jn=c._emscripten_get_global_libc=function(){return(Jn=c._emscripten_get_global_libc=c.asm.ob).apply(null,arguments)},et=c._pthread_self=function(){return(et=c._pthread_self=c.asm.pb).apply(null,arguments)},nt=c.___pthread_tsd_run_dtors=function(){return(nt=c.___pthread_tsd_run_dtors=c.asm.qb).apply(null,arguments)},tt=c._emscripten_main_thread_process_queued_calls=function(){return(tt=c._emscripten_main_thread_process_queued_calls=c.asm.rb).apply(null,arguments)},at=(c._emscripten_current_thread_process_queued_calls=function(){return(c._emscripten_current_thread_process_queued_calls=c.asm.sb).apply(null,arguments)},c._emscripten_register_main_browser_thread_id=function(){return(at=c._emscripten_register_main_browser_thread_id=c.asm.tb).apply(null,arguments)}),rt=c._emscripten_main_browser_thread_id=function(){return(rt=c._emscripten_main_browser_thread_id=c.asm.ub).apply(null,arguments)},st=c.__emscripten_do_dispatch_to_thread=function(){return(st=c.__emscripten_do_dispatch_to_thread=c.asm.vb).apply(null,arguments)},ut=c._emscripten_sync_run_in_main_thread_4=function(){return(ut=c._emscripten_sync_run_in_main_thread_4=c.asm.wb).apply(null,arguments)},ot=c._emscripten_run_in_main_runtime_thread_js=function(){return(ot=c._emscripten_run_in_main_runtime_thread_js=c.asm.xb).apply(null,arguments)},it=c.__emscripten_call_on_thread=function(){return(it=c.__emscripten_call_on_thread=c.asm.yb).apply(null,arguments)},dt=(c._emscripten_tls_init=function(){return(c._emscripten_tls_init=c.asm.zb).apply(null,arguments)},c.__emscripten_thread_init=function(){return(dt=c.__emscripten_thread_init=c.asm.Ab).apply(null,arguments)}),ct=c.stackSave=function(){return(ct=c.stackSave=c.asm.Bb).apply(null,arguments)},lt=c.stackRestore=function(){return(lt=c.stackRestore=c.asm.Cb).apply(null,arguments)},pt=c.stackAlloc=function(){return(pt=c.stackAlloc=c.asm.Db).apply(null,arguments)},mt=c._emscripten_stack_set_limits=function(){return(mt=c._emscripten_stack_set_limits=c.asm.Eb).apply(null,arguments)},ft=c._memalign=function(){return(ft=c._memalign=c.asm.Fb).apply(null,arguments)},ht=c.__emscripten_allow_main_runtime_queued_calls=10656,bt=c.__emscripten_main_thread_futex=12292;function yt(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function gt(e){if(!(le>0)){if(g)return o(c),ue(),void postMessage({cmd:"loaded"});se(),le>0||(c.setStatus?(c.setStatus("Running..."),setTimeout((function(){setTimeout((function(){c.setStatus("")}),1),n()}),1)):n())}function n(){Gn||(Gn=!0,c.calledRun=!0,U||(ue(),oe(),o(c),c.onRuntimeInitialized&&c.onRuntimeInitialized(),ie()))}}function _t(e,n){if(!n||!R||0!==e){if(!n&&g)throw postMessage({cmd:"exitProcess",returnCode:e}),new yt(e);R||(De.terminateAllThreads(),c.onExit&&c.onExit(e),U=!0),m(e,new yt(e))}}if(c.cwrap=G,c.PThread=De,c.PThread=De,c.wasmMemory=O,c.ExitStatus=yt,pe=function e(){Gn||gt(),Gn||(pe=e)},c.run=gt,c.preInit)for("function"==typeof c.preInit&&(c.preInit=[c.preInit]);c.preInit.length>0;)c.preInit.pop()();if(g&&(R=!1,De.initWorker()),gt(),d&&(Vn={uncaughtException:process.listeners("uncaughtException").filter((function(e){return!d.uncaughtException.indexOf(e)>-1})),unhandledRejection:process.listeners("unhandledRejection").filter((function(e){return!d.unhandledRejection.indexOf(e)>-1}))}),"undefined"!=typeof WasmBackendModule)qn=WasmBackendModule;else{if("undefined"==typeof e)throw new Error("Could not find wasm module in post.js");qn=e}if(Vn){var wt=qn._dispose;qn._dispose=function(){wt(),Vn.uncaughtException.forEach((function(e){process.removeListener("uncaughtException",e)})),Vn.unhandledRejection.forEach((function(e){process.removeListener("unhandledRejection",e)}))}}return e.ready});e.exports=a}));var _r=yr((function(e,n){var t,a=(t="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0,"undefined"!=typeof __filename&&(t=t||__filename),function(e){var n,a,r,s="undefined"!=typeof(e=e||{})?e:{};s.ready=new Promise((function(e,t){n=e,a=t})),"undefined"!=typeof process&&process.listeners&&(r={uncaughtException:process.listeners("uncaughtException"),unhandledRejection:process.listeners("unhandledRejection")});var u,o={};for(u in s)s.hasOwnProperty(u)&&(o[u]=s[u]);var i=!1,d=!1,c=!1,l=!1;i="object"==typeof window,d="function"==typeof importScripts,c="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,l=!i&&!c&&!d;var p,m,f,h,b,y="";function g(e){return s.locateFile?s.locateFile(e,y):y+e}c?(y=d?un.dirname(y)+"/":__dirname+"/",p=function(e,n){return h||(h=on),b||(b=un),e=b.normalize(e),h.readFileSync(e,n?null:"utf8")},f=function(e){var n=p(e,!0);return n.buffer||(n=new Uint8Array(n)),S(n.buffer),n},process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),process.on("uncaughtException",(function(e){if(!(e instanceof De))throw e})),process.on("unhandledRejection",ne),s.inspect=function(){return"[Emscripten Module object]"}):l?("undefined"!=typeof read&&(p=function(e){return read(e)}),f=function(e){var n;return"function"==typeof readbuffer?new Uint8Array(readbuffer(e)):(S("object"==typeof(n=read(e,"binary"))),n)},"undefined"!=typeof scriptArgs&&scriptArgs,"undefined"!=typeof print&&("undefined"==typeof console&&(console={}),console.log=print,console.warn=console.error="undefined"!=typeof printErr?printErr:print)):(i||d)&&(d?y=self.location.href:"undefined"!=typeof document&&document.currentScript&&(y=document.currentScript.src),t&&(y=t),y=0!==y.indexOf("blob:")?y.substr(0,y.lastIndexOf("/")+1):"",p=function(e){var n=new XMLHttpRequest;return n.open("GET",e,!1),n.send(null),n.responseText},d&&(f=function(e){var n=new XMLHttpRequest;return n.open("GET",e,!1),n.responseType="arraybuffer",n.send(null),new Uint8Array(n.response)}),m=function(e,n,t){var a=new XMLHttpRequest;a.open("GET",e,!0),a.responseType="arraybuffer",a.onload=function(){200==a.status||0==a.status&&a.response?n(a.response):t()},a.onerror=t,a.send(null)});var _,w,I=s.print||console.log.bind(console),k=s.printErr||console.warn.bind(console);for(u in o)o.hasOwnProperty(u)&&(s[u]=o[u]);o=null,s.arguments&&s.arguments,s.thisProgram&&s.thisProgram,s.quit&&s.quit,s.wasmBinary&&(_=s.wasmBinary),s.noExitRuntime,"object"!=typeof WebAssembly&&ne("no native wasm support detected");var v=!1;function S(e,n){e||ne("Assertion failed: "+n)}function M(e){var n=s["_"+e];return S(n,"Cannot call unknown function "+e+", make sure it is exported"),n}function E(e,n,t,a,r){var s={string:function(e){var n=0;if(null!=e&&0!==e){var t=1+(e.length<<2);P(e,n=Re(t),t)}return n},array:function(e){var n=Re(e.length);return W(e,n),n}},u=M(e),o=[],i=0;if(a)for(var d=0;d<a.length;d++){var c=s[t[d]];c?(0===i&&(i=Oe()),o[d]=c(a[d])):o[d]=a[d]}var l=u.apply(null,o);return l=function(e){return"string"===n?D(e):"boolean"===n?Boolean(e):e}(l),0!==i&&Te(i),l}function A(e,n,t,a){var r=(t=t||[]).every((function(e){return"number"===e}));return"string"!==n&&r&&!a?M(e):function(){return E(e,n,t,arguments)}}var x,N,F,O,T="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function R(e,n,t){for(var a=n+t,r=n;e[r]&&!(r>=a);)++r;if(r-n>16&&e.subarray&&T)return T.decode(e.subarray(n,r));for(var s="";n<r;){var u=e[n++];if(128&u){var o=63&e[n++];if(192!=(224&u)){var i=63&e[n++];if((u=224==(240&u)?(15&u)<<12|o<<6|i:(7&u)<<18|o<<12|i<<6|63&e[n++])<65536)s+=String.fromCharCode(u);else{var d=u-65536;s+=String.fromCharCode(55296|d>>10,56320|1023&d)}}else s+=String.fromCharCode((31&u)<<6|o)}else s+=String.fromCharCode(u)}return s}function D(e,n){return e?R(F,e,n):""}function C(e,n,t,a){if(!(a>0))return 0;for(var r=t,s=t+a-1,u=0;u<e.length;++u){var o=e.charCodeAt(u);if(o>=55296&&o<=57343&&(o=65536+((1023&o)<<10)|1023&e.charCodeAt(++u)),o<=127){if(t>=s)break;n[t++]=o}else if(o<=2047){if(t+1>=s)break;n[t++]=192|o>>6,n[t++]=128|63&o}else if(o<=65535){if(t+2>=s)break;n[t++]=224|o>>12,n[t++]=128|o>>6&63,n[t++]=128|63&o}else{if(t+3>=s)break;n[t++]=240|o>>18,n[t++]=128|o>>12&63,n[t++]=128|o>>6&63,n[t++]=128|63&o}}return n[t]=0,t-r}function P(e,n,t){return C(e,F,n,t)}function W(e,n){N.set(e,n)}function L(e,n){return e%n>0&&(e+=n-e%n),e}function H(e){x=e,s.HEAP8=N=new Int8Array(e),s.HEAP16=new Int16Array(e),s.HEAP32=O=new Int32Array(e),s.HEAPU8=F=new Uint8Array(e),s.HEAPU16=new Uint16Array(e),s.HEAPU32=new Uint32Array(e),s.HEAPF32=new Float32Array(e),s.HEAPF64=new Float64Array(e)}s.INITIAL_MEMORY;var U,z=[],B=[],j=[],G=[];function V(){if(s.preRun)for("function"==typeof s.preRun&&(s.preRun=[s.preRun]);s.preRun.length;)X(s.preRun.shift());le(z)}function q(){le(B)}function $(){le(j)}function K(){if(s.postRun)for("function"==typeof s.postRun&&(s.postRun=[s.postRun]);s.postRun.length;)Q(s.postRun.shift());le(G)}function X(e){z.unshift(e)}function Q(e){G.unshift(e)}B.push({func:function(){Ne()}});var Y=0,Z=null;function J(e){Y++,s.monitorRunDependencies&&s.monitorRunDependencies(Y)}function ee(e){if(Y--,s.monitorRunDependencies&&s.monitorRunDependencies(Y),0==Y&&Z){var n=Z;Z=null,n()}}function ne(e){s.onAbort&&s.onAbort(e),k(e+=""),v=!0,e="abort("+e+"). Build with -s ASSERTIONS=1 for more info.";var n=new WebAssembly.RuntimeError(e);throw a(n),n}function te(e,n){return String.prototype.startsWith?e.startsWith(n):0===e.indexOf(n)}s.preloadedImages={},s.preloadedAudios={};var ae="data:application/octet-stream;base64,";function re(e){return te(e,ae)}var se="file://";function ue(e){return te(e,se)}var oe="tfjs-backend-wasm.wasm";function ie(e){try{if(e==oe&&_)return new Uint8Array(_);if(f)return f(e);throw"both async and sync fetching of the wasm failed"}catch(e){ne(e)}}function de(){if(!_&&(i||d)){if("function"==typeof fetch&&!ue(oe))return fetch(oe,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at '"+oe+"'";return e.arrayBuffer()})).catch((function(){return ie(oe)}));if(m)return new Promise((function(e,n){m(oe,(function(n){e(new Uint8Array(n))}),n)}))}return Promise.resolve().then((function(){return ie(oe)}))}function ce(){var e={a:xe};function n(e,n){var t=e.exports;s.asm=t,H((w=s.asm.j).buffer),U=s.asm.r,ee()}function t(e){n(e.instance)}function r(n){return de().then((function(n){return WebAssembly.instantiate(n,e)})).then(n,(function(e){k("failed to asynchronously prepare wasm: "+e),ne(e)}))}if(J(),s.instantiateWasm)try{return s.instantiateWasm(e,n)}catch(e){return k("Module.instantiateWasm callback failed with error: "+e),!1}return(_||"function"!=typeof WebAssembly.instantiateStreaming||re(oe)||ue(oe)||"function"!=typeof fetch?r(t):fetch(oe,{credentials:"same-origin"}).then((function(n){return WebAssembly.instantiateStreaming(n,e).then(t,(function(e){return k("wasm streaming compile failed: "+e),k("falling back to ArrayBuffer instantiation"),r(t)}))}))).catch(a),{}}function le(e){for(;e.length>0;){var n=e.shift();if("function"!=typeof n){var t=n.func;"number"==typeof t?void 0===n.arg?U.get(t)():U.get(t)(n.arg):t(void 0===n.arg?null:n.arg)}else n(s)}}function pe(){ne()}function me(e,n,t){F.copyWithin(e,n,n+t)}function fe(){return F.length}function he(e){try{return w.grow(e-x.byteLength+65535>>>16),H(w.buffer),1}catch(e){}}function be(e){var n=fe(),t=2147483648;if(e>t)return!1;for(var a=1;a<=4;a*=2){var r=n*(1+.2/a);if(r=Math.min(r,e+100663296),he(Math.min(t,L(Math.max(e,r),65536))))return!0}return!1}re(oe)||(oe=g(oe));var ye={mappings:{},buffers:[null,[],[]],printChar:function(e,n){var t=ye.buffers[e];0===n||10===n?((1===e?I:k)(R(t,0)),t.length=0):t.push(n)},varargs:void 0,get:function(){return ye.varargs+=4,O[ye.varargs-4>>2]},getStr:function(e){return D(e)},get64:function(e,n){return e}};function ge(e){return 0}function _e(e,n,t,a,r){}function we(e,n,t,a){for(var r=0,s=0;s<t;s++){for(var u=O[n+8*s>>2],o=O[n+(8*s+4)>>2],i=0;i<o;i++)ye.printChar(e,F[u+i]);r+=o}return O[a>>2]=r,0}function Ie(){return 6}function ke(){return 28}function ve(e){return O[Fe()>>2]=e,e}function Se(e){switch(e){case 30:return 16384;case 85:return 131072;case 132:case 133:case 12:case 137:case 138:case 15:case 235:case 16:case 17:case 18:case 19:case 20:case 149:case 13:case 10:case 236:case 153:case 9:case 21:case 22:case 159:case 154:case 14:case 77:case 78:case 139:case 82:case 68:case 67:case 164:case 11:case 29:case 47:case 48:case 95:case 52:case 51:case 46:return 200809;case 27:case 246:case 127:case 128:case 23:case 24:case 160:case 161:case 181:case 182:case 242:case 183:case 184:case 243:case 244:case 245:case 165:case 178:case 179:case 49:case 50:case 168:case 169:case 175:case 170:case 171:case 172:case 97:case 76:case 32:case 173:case 35:case 80:case 81:case 79:return-1;case 176:case 177:case 7:case 155:case 8:case 157:case 125:case 126:case 92:case 93:case 129:case 130:case 131:case 94:case 91:return 1;case 74:case 60:case 69:case 70:case 4:return 1024;case 31:case 42:case 72:return 32;case 87:case 26:case 33:return 2147483647;case 34:case 1:return 47839;case 38:case 36:return 99;case 43:case 37:return 2048;case 0:return 2097152;case 3:return 65536;case 28:return 32768;case 44:return 32767;case 75:return 16384;case 39:return 1e3;case 89:return 700;case 71:return 256;case 40:return 255;case 2:return 100;case 180:return 64;case 25:return 20;case 5:return 16;case 6:return 6;case 73:return 4;case 84:return"object"==typeof navigator&&navigator.hardwareConcurrency||1}return ve(28),-1}var Me,Ee,Ae,xe={a:pe,d:me,e:be,f:ge,c:_e,b:we,h:Ie,g:ke,i:Se},Ne=(ce(),s.___wasm_call_ctors=function(){return(Ne=s.___wasm_call_ctors=s.asm.k).apply(null,arguments)}),Fe=(s._init=function(){return(s._init=s.asm.l).apply(null,arguments)},s._init_with_threads_count=function(){return(s._init_with_threads_count=s.asm.m).apply(null,arguments)},s._get_threads_count=function(){return(s._get_threads_count=s.asm.n).apply(null,arguments)},s._register_tensor=function(){return(s._register_tensor=s.asm.o).apply(null,arguments)},s._dispose_data=function(){return(s._dispose_data=s.asm.p).apply(null,arguments)},s._dispose=function(){return(s._dispose=s.asm.q).apply(null,arguments)},s._Abs=function(){return(s._Abs=s.asm.s).apply(null,arguments)},s._Add=function(){return(s._Add=s.asm.t).apply(null,arguments)},s._AddN=function(){return(s._AddN=s.asm.u).apply(null,arguments)},s._All=function(){return(s._All=s.asm.v).apply(null,arguments)},s._Any=function(){return(s._Any=s.asm.w).apply(null,arguments)},s._ArgMax=function(){return(s._ArgMax=s.asm.x).apply(null,arguments)},s._AvgPool=function(){return(s._AvgPool=s.asm.y).apply(null,arguments)},s._BatchMatMul=function(){return(s._BatchMatMul=s.asm.z).apply(null,arguments)},s._Ceil=function(){return(s._Ceil=s.asm.A).apply(null,arguments)},s._ClipByValue=function(){return(s._ClipByValue=s.asm.B).apply(null,arguments)},s._Conv2D=function(){return(s._Conv2D=s.asm.C).apply(null,arguments)},s._Conv2DBackpropInput=function(){return(s._Conv2DBackpropInput=s.asm.D).apply(null,arguments)},s._Cos=function(){return(s._Cos=s.asm.E).apply(null,arguments)},s._Cosh=function(){return(s._Cosh=s.asm.F).apply(null,arguments)},s._CropAndResize=function(){return(s._CropAndResize=s.asm.G).apply(null,arguments)},s._Cumsum=function(){return(s._Cumsum=s.asm.H).apply(null,arguments)},s._DepthToSpace=function(){return(s._DepthToSpace=s.asm.I).apply(null,arguments)},s._DepthwiseConv2dNative=function(){return(s._DepthwiseConv2dNative=s.asm.J).apply(null,arguments)},s._Elu=function(){return(s._Elu=s.asm.K).apply(null,arguments)},s._Equal=function(){return(s._Equal=s.asm.L).apply(null,arguments)},s._Exp=function(){return(s._Exp=s.asm.M).apply(null,arguments)},s._FlipLeftRight=function(){return(s._FlipLeftRight=s.asm.N).apply(null,arguments)},s._Floor=function(){return(s._Floor=s.asm.O).apply(null,arguments)},s._FloorDiv=function(){return(s._FloorDiv=s.asm.P).apply(null,arguments)},s._FusedBatchNorm=function(){return(s._FusedBatchNorm=s.asm.Q).apply(null,arguments)},s._FusedConv2D=function(){return(s._FusedConv2D=s.asm.R).apply(null,arguments)},s._FusedDepthwiseConv2D=function(){return(s._FusedDepthwiseConv2D=s.asm.S).apply(null,arguments)},s._Gather=function(){return(s._Gather=s.asm.T).apply(null,arguments)},s._GatherNd=function(){return(s._GatherNd=s.asm.U).apply(null,arguments)},s._Greater=function(){return(s._Greater=s.asm.V).apply(null,arguments)},s._GreaterEqual=function(){return(s._GreaterEqual=s.asm.W).apply(null,arguments)},s._LeakyRelu=function(){return(s._LeakyRelu=s.asm.X).apply(null,arguments)},s._Less=function(){return(s._Less=s.asm.Y).apply(null,arguments)},s._LessEqual=function(){return(s._LessEqual=s.asm.Z).apply(null,arguments)},s._Log=function(){return(s._Log=s.asm._).apply(null,arguments)},s._LogicalAnd=function(){return(s._LogicalAnd=s.asm.$).apply(null,arguments)},s._Max=function(){return(s._Max=s.asm.aa).apply(null,arguments)},s._MaxPool=function(){return(s._MaxPool=s.asm.ba).apply(null,arguments)},s._Maximum=function(){return(s._Maximum=s.asm.ca).apply(null,arguments)},s._Mean=function(){return(s._Mean=s.asm.da).apply(null,arguments)},s._Min=function(){return(s._Min=s.asm.ea).apply(null,arguments)},s._Minimum=function(){return(s._Minimum=s.asm.fa).apply(null,arguments)},s._MirrorPad=function(){return(s._MirrorPad=s.asm.ga).apply(null,arguments)},s._Multiply=function(){return(s._Multiply=s.asm.ha).apply(null,arguments)},s._Neg=function(){return(s._Neg=s.asm.ia).apply(null,arguments)},s._NonMaxSuppressionV3=function(){return(s._NonMaxSuppressionV3=s.asm.ja).apply(null,arguments)},s._NonMaxSuppressionV4=function(){return(s._NonMaxSuppressionV4=s.asm.ka).apply(null,arguments)},s._NonMaxSuppressionV5=function(){return(s._NonMaxSuppressionV5=s.asm.la).apply(null,arguments)},s._NotEqual=function(){return(s._NotEqual=s.asm.ma).apply(null,arguments)},s._OneHot=function(){return(s._OneHot=s.asm.na).apply(null,arguments)},s._PadV2=function(){return(s._PadV2=s.asm.oa).apply(null,arguments)},s._Pow=function(){return(s._Pow=s.asm.pa).apply(null,arguments)},s._Prelu=function(){return(s._Prelu=s.asm.qa).apply(null,arguments)},s._Prod=function(){return(s._Prod=s.asm.ra).apply(null,arguments)},s._RealDiv=function(){return(s._RealDiv=s.asm.sa).apply(null,arguments)},s._Relu=function(){return(s._Relu=s.asm.ta).apply(null,arguments)},s._Relu6=function(){return(s._Relu6=s.asm.ua).apply(null,arguments)},s._ResizeBilinear=function(){return(s._ResizeBilinear=s.asm.va).apply(null,arguments)},s._Reverse=function(){return(s._Reverse=s.asm.wa).apply(null,arguments)},s._RotateWithOffset=function(){return(s._RotateWithOffset=s.asm.xa).apply(null,arguments)},s._Round=function(){return(s._Round=s.asm.ya).apply(null,arguments)},s._Rsqrt=function(){return(s._Rsqrt=s.asm.za).apply(null,arguments)},s._ScatterNd=function(){return(s._ScatterNd=s.asm.Aa).apply(null,arguments)},s._SelectV2=function(){return(s._SelectV2=s.asm.Ba).apply(null,arguments)},s._Sigmoid=function(){return(s._Sigmoid=s.asm.Ca).apply(null,arguments)},s._Sin=function(){return(s._Sin=s.asm.Da).apply(null,arguments)},s._Softmax=function(){return(s._Softmax=s.asm.Ea).apply(null,arguments)},s._SparseFillEmptyRows=function(){return(s._SparseFillEmptyRows=s.asm.Fa).apply(null,arguments)},s._SparseReshape=function(){return(s._SparseReshape=s.asm.Ga).apply(null,arguments)},s._SparseSegmentReduction=function(){return(s._SparseSegmentReduction=s.asm.Ha).apply(null,arguments)},s._Sqrt=function(){return(s._Sqrt=s.asm.Ia).apply(null,arguments)},s._Square=function(){return(s._Square=s.asm.Ja).apply(null,arguments)},s._SquaredDifference=function(){return(s._SquaredDifference=s.asm.Ka).apply(null,arguments)},s._Step=function(){return(s._Step=s.asm.La).apply(null,arguments)},s._StridedSlice=function(){return(s._StridedSlice=s.asm.Ma).apply(null,arguments)},s._Sub=function(){return(s._Sub=s.asm.Na).apply(null,arguments)},s._Sum=function(){return(s._Sum=s.asm.Oa).apply(null,arguments)},s._Tan=function(){return(s._Tan=s.asm.Pa).apply(null,arguments)},s._Tanh=function(){return(s._Tanh=s.asm.Qa).apply(null,arguments)},s._Tile=function(){return(s._Tile=s.asm.Ra).apply(null,arguments)},s._TopK=function(){return(s._TopK=s.asm.Sa).apply(null,arguments)},s._Transform=function(){return(s._Transform=s.asm.Ta).apply(null,arguments)},s._Transpose=function(){return(s._Transpose=s.asm.Ua).apply(null,arguments)},s.__FusedMatMul=function(){return(s.__FusedMatMul=s.asm.Va).apply(null,arguments)},s._malloc=function(){return(s._malloc=s.asm.Wa).apply(null,arguments)},s._free=function(){return(s._free=s.asm.Xa).apply(null,arguments)},s.___errno_location=function(){return(Fe=s.___errno_location=s.asm.Ya).apply(null,arguments)}),Oe=s.stackSave=function(){return(Oe=s.stackSave=s.asm.Za).apply(null,arguments)},Te=s.stackRestore=function(){return(Te=s.stackRestore=s.asm._a).apply(null,arguments)},Re=s.stackAlloc=function(){return(Re=s.stackAlloc=s.asm.$a).apply(null,arguments)};function De(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function Ce(e){function t(){Me||(Me=!0,s.calledRun=!0,v||(q(),$(),n(s),s.onRuntimeInitialized&&s.onRuntimeInitialized(),K()))}Y>0||(V(),Y>0||(s.setStatus?(s.setStatus("Running..."),setTimeout((function(){setTimeout((function(){s.setStatus("")}),1),t()}),1)):t()))}if(s.cwrap=A,Z=function e(){Me||Ce(),Me||(Z=e)},s.run=Ce,s.preInit)for("function"==typeof s.preInit&&(s.preInit=[s.preInit]);s.preInit.length>0;)s.preInit.pop()();if(Ce(),r&&(Ee={uncaughtException:process.listeners("uncaughtException").filter((function(e){return!r.uncaughtException.indexOf(e)>-1})),unhandledRejection:process.listeners("unhandledRejection").filter((function(e){return!r.unhandledRejection.indexOf(e)>-1}))}),"undefined"!=typeof e)Ae=e;else{if("undefined"==typeof WasmBackendModuleThreadedSimd)throw new Error("Could not find wasm module in post.js");Ae=WasmBackendModuleThreadedSimd}if(Ee){var Pe=Ae._dispose;Ae._dispose=function(){Pe(),Ee.uncaughtException.forEach((function(e){process.removeListener("uncaughtException",e)})),Ee.unhandledRejection.forEach((function(e){process.removeListener("unhandledRejection",e)}))}}return e.ready});e.exports=a}));class wr extends nn{constructor(e){super(),this.wasm=e,this.dataIdNextNumber=1,this.wasm.tfjs.initWithThreadsCount(Or),Tr=this.wasm.tfjs.getThreadsCount(),this.dataIdMap=new tn(this,an())}write(e,n,t){const a={id:this.dataIdNextNumber++};return this.move(a,e,n,t,1),a}numDataIds(){return this.dataIdMap.numDataIds()}async time(e){const n=t.now();e();return{kernelMs:t.now()-n}}move(e,n,a,r,s){const u=this.dataIdNextNumber++;if("string"===r){const t=n;return void this.dataIdMap.set(e,{id:u,stringBytes:t,shape:a,dtype:r,memoryOffset:null,refCount:s})}const o=t.sizeFromShape(a),i=o*t.bytesPerElement(r),d=this.wasm._malloc(i);this.dataIdMap.set(e,{id:u,memoryOffset:d,shape:a,dtype:r,refCount:s}),this.wasm.tfjs.registerTensor(u,o,d),null!=n&&this.wasm.HEAPU8.set(new Uint8Array(n.buffer,n.byteOffset,i),d)}async read(e){return this.readSync(e)}readSync(e,n,a){const{memoryOffset:r,dtype:s,shape:u,stringBytes:o}=this.dataIdMap.get(e);if("string"===s)return null!=n&&0!==n||!(null==a||a>=o.length)?o.slice(n,a):o;n=n||0,a=a||t.sizeFromShape(u);const i=t.bytesPerElement(s);return function(e,n){switch(n){case"float32":return new Float32Array(e);case"int32":return new Int32Array(e);case"bool":return new Uint8Array(e);default:throw new Error(`Unknown dtype ${n}`)}}(this.wasm.HEAPU8.slice(r+n*i,r+a*i).buffer,s)}disposeData(e,n=!1){if(this.dataIdMap.has(e)){const t=this.dataIdMap.get(e);if(t.refCount--,!n&&t.refCount>0)return!1;this.wasm._free(t.memoryOffset),this.wasm.tfjs.disposeData(t.id),this.dataIdMap.delete(e)}return!0}refCount(e){if(this.dataIdMap.has(e)){return this.dataIdMap.get(e).refCount}return 0}incRef(e){const n=this.dataIdMap.get(e);null!=n&&n.refCount++}floatPrecision(){return 32}getMemoryOffset(e){return this.dataIdMap.get(e).memoryOffset}dispose(){this.wasm.tfjs.dispose(),"PThread"in this.wasm&&this.wasm.PThread.terminateAllThreads(),this.wasm=null}memory(){return{unreliable:!1}}makeOutput(e,n,a){let r;if(null==a)r=this.write(null,e,n);else{const s=this.dataIdNextNumber++;r={id:s},this.dataIdMap.set(r,{id:s,memoryOffset:a,shape:e,dtype:n,refCount:1});const u=t.sizeFromShape(e);this.wasm.tfjs.registerTensor(s,u,a)}return{dataId:r,shape:e,dtype:n}}typedArrayFromHeap({shape:e,dtype:n,dataId:a}){const r=this.wasm.HEAPU8.buffer,{memoryOffset:s}=this.dataIdMap.get(a),u=t.sizeFromShape(e);switch(n){case"float32":return new Float32Array(r,s,u);case"int32":return new Int32Array(r,s,u);case"bool":return new Uint8Array(r,s,u);default:throw new Error(`Unknown dtype ${n}`)}}}function Ir(e,n,t){if(null!=Sr)return Sr;let a="tfjs-backend-wasm.wasm";return e&&n?a="tfjs-backend-wasm-threaded-simd.wasm":e&&(a="tfjs-backend-wasm-simd.wasm"),null!=Er&&null!=Er[a]?Er[a]:t+a}async function kr(){const[e,n]=await Promise.all([en().getAsync("WASM_HAS_SIMD_SUPPORT"),en().getAsync("WASM_HAS_MULTITHREAD_SUPPORT")]);return new Promise(((a,r)=>{const s={locateFile:(t,a)=>{if(t.endsWith(".worker.js")){const e=new Blob(['var Module={};function threadPrintErr(){var text=Array.prototype.slice.call(arguments).join(" ");console.error(text)}function threadAlert(){var text=Array.prototype.slice.call(arguments).join(" ");postMessage({cmd:"alert",text:text,threadId:Module["_pthread_self"]()})}var err=threadPrintErr;this.alert=threadAlert;Module["instantiateWasm"]=function(info,receiveInstance){var instance=new WebAssembly.Instance(Module["wasmModule"],info);Module["wasmModule"]=null;receiveInstance(instance);return instance.exports};function moduleLoaded(){}this.onmessage=function(e){try{if(e.data.cmd==="load"){Module["wasmModule"]=e.data.wasmModule;Module["wasmMemory"]=e.data.wasmMemory;Module["buffer"]=Module["wasmMemory"].buffer;Module["ENVIRONMENT_IS_PTHREAD"]=true;if(typeof e.data.urlOrBlob==="string"){importScripts(e.data.urlOrBlob)}else{var objectUrl=URL.createObjectURL(e.data.urlOrBlob);importScripts(objectUrl);URL.revokeObjectURL(objectUrl)}WasmBackendModuleThreadedSimd(Module).then(function(instance){Module=instance;moduleLoaded()})}else if(e.data.cmd==="objectTransfer"){Module["PThread"].receiveObjectTransfer(e.data)}else if(e.data.cmd==="run"){Module["__performance_now_clock_drift"]=performance.now()-e.data.time;Module["__emscripten_thread_init"](e.data.threadInfoStruct,0,0);var max=e.data.stackBase;var top=e.data.stackBase+e.data.stackSize;Module["establishStackSpace"](top,max);Module["_emscripten_tls_init"]();Module["PThread"].receiveObjectTransfer(e.data);Module["PThread"].setThreadStatus(Module["_pthread_self"](),1);try{var result=Module["invokeEntryPoint"](e.data.start_routine,e.data.arg);if(!Module["getNoExitRuntime"]())Module["PThread"].threadExit(result)}catch(ex){if(ex==="Canceled!"){Module["PThread"].threadCancel()}else if(ex!="unwind"){if(ex instanceof Module["ExitStatus"]){if(Module["getNoExitRuntime"]()){}else{Module["PThread"].threadExit(ex.status)}}else{Module["PThread"].threadExit(-2);throw ex}}}}else if(e.data.cmd==="cancel"){if(Module["_pthread_self"]()){Module["PThread"].threadCancel()}}else if(e.data.target==="setimmediate"){}else if(e.data.cmd==="processThreadQueue"){if(Module["_pthread_self"]()){Module["_emscripten_current_thread_process_queued_calls"]()}}else{err("worker.js received unknown command "+e.data.cmd);err(e.data)}}catch(ex){err("worker.js onmessage() captured an uncaught exception: "+ex);if(ex&&ex.stack)err(ex.stack);throw ex}};if(typeof process==="object"&&typeof process.versions==="object"&&typeof process.versions.node==="string"){self={location:{href:__filename}};var onmessage=this.onmessage;var nodeWorkerThreads=require("worker_threads");global.Worker=nodeWorkerThreads.Worker;var parentPort=nodeWorkerThreads.parentPort;parentPort.on("message",function(data){onmessage({data:data})});var nodeFS=require("fs");var nodeRead=function(filename){return nodeFS.readFileSync(filename,"utf8")};function globalEval(x){global.require=require;global.Module=Module;eval.call(null,x)}importScripts=function(f){globalEval(nodeRead(f))};postMessage=function(msg){parentPort.postMessage(msg)};if(typeof performance==="undefined"){performance={now:function(){return Date.now()}}}}'],{type:"application/javascript"});return URL.createObjectURL(e)}return t.endsWith(".wasm")?Ir(e,n,null!=Mr?Mr:a):a+t}};xr&&(s.instantiateWasm=function(e){return(n,a)=>(t.fetch(e,{credentials:"same-origin"}).then((t=>{t.ok||n.env.a(`failed to load wasm binary file at '${e}'`),t.arrayBuffer().then((e=>{WebAssembly.instantiate(e,n).then((e=>{a(e.instance,e.module)}))}))})),{})}(Ir(e,n,null!=Mr?Mr:"")));let u,o=!1;s.onAbort=()=>{if(o)return;if(Ar)return;Ar=!0;r({message:"Make sure the server can serve the `.wasm` file relative to the bundled js file. For more details see https://github.com/tensorflow/tfjs/blob/master/tfjs-backend-wasm/README.md#using-bundlers"})},n&&e&&null==Sr?(s.mainScriptUrlOrBlob=new Blob(["var WasmBackendModuleThreadedSimd = "+gr.toString()],{type:"text/javascript"}),u=gr(s)):u=_r(s),u.then((e=>{o=!0,Ar=!1;e.tfjs={init:e.cwrap("init",null,[]),initWithThreadsCount:e.cwrap("init_with_threads_count",null,["number"]),getThreadsCount:e.cwrap("get_threads_count","number",[]),registerTensor:e.cwrap("register_tensor",null,["number","number","number"]),disposeData:e.cwrap("dispose_data",null,["number"]),dispose:e.cwrap("dispose",null,[])},a({wasm:e})}))}))}const vr=["tfjs-backend-wasm.wasm","tfjs-backend-wasm-simd.wasm","tfjs-backend-wasm-threaded-simd.wasm"];let Sr=null,Mr=null,Er={},Ar=!1,xr=!1;function Nr(e,n=!1){if(rn("setWasmPath has been deprecated in favor of setWasmPaths and will be removed in a future release."),Ar)throw new Error("The WASM backend was already initialized. Make sure you call `setWasmPath()` before you call `tf.setBackend()` or `tf.ready()`");Sr=e,xr=n}function Fr(e,n=!1){if(Ar)throw new Error("The WASM backend was already initialized. Make sure you call `setWasmPaths()` before you call `tf.setBackend()` or `tf.ready()`");if("string"==typeof e)Mr=e;else{Er=e;const n=vr.filter((e=>null==Er[e]));if(n.length>0)throw new Error(`There were no entries found for the following binaries: ${n.join(",")}. Please either call setWasmPaths with a map providing a path for each binary, or with a string indicating the directory where all the binaries can be found.`)}xr=n}let Or=-1,Tr=-1;function Rr(e){Or=e}function Dr(){if(-1===Tr)throw new Error("WASM backend not initialized.");return Tr}const Cr="3.13.0";sn("wasm",(async()=>{const{wasm:e}=await kr();return new wr(e)}),2);export{wr as BackendWasm,Dr as getThreadsCount,Rr as setThreadsCount,Nr as setWasmPath,Fr as setWasmPaths,Cr as version_wasm};
//# sourceMappingURL=tf-backend-wasm.fesm.min.js.map
