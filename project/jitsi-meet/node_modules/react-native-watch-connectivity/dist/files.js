"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getFileTransfers = exports._transformFilePayload = exports.startFileTransfer = void 0;
const native_module_1 = require("./native-module");
function startFileTransfer(uri, metadata = {}) {
    return native_module_1.NativeModule.transferFile(uri, metadata);
}
exports.startFileTransfer = startFileTransfer;
/**
 * @private
 */
function _transformFilePayload({ startTime, endTime, ...rest }) {
    return {
        startTime: new Date(startTime),
        endTime: endTime ? new Date(endTime) : null,
        ...rest,
    };
}
exports._transformFilePayload = _transformFilePayload;
async function getFileTransfers() {
    const adapted = {};
    const transfers = await native_module_1.NativeModule.getFileTransfers();
    Object.values(transfers).forEach((t) => {
        adapted[t.id] = _transformFilePayload(t);
    });
    return adapted;
}
exports.getFileTransfers = getFileTransfers;
